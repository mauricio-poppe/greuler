/*! For license information please see greuler.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.greuler=e():t.greuler=e()}(self,(()=>(()=>{var t={308:()=>{!function(t,e){try{t.querySelector(":scope body")}catch(n){["querySelector","querySelectorAll"].forEach((function(n){var r=e[n];e[n]=function(e){if(/(^|,)\s*:scope/.test(e)){var i=this.id;this.id="ID_"+Date.now(),e=e.replace(/((^|,)\s*):scope/g,"$1#"+this.id);var o=t[n](e);return this.id=i,o}return r.call(this,e)}}))}}(window.document,Element.prototype)},533:t=>{"use strict";var e=123459876,n=2147483647;t.exports=function(t){var r;if(arguments.length){if("number"!=typeof t||t!=t||t%1!=0||t<1)throw new TypeError("lcg()::invalid input argument. Seed must be a positive integer.");r=t}else r=Date.now()%1e8;return function(t){var i,o;if(!arguments.length)return o=(r=16807*(r^=e)%n)/n,r^=e,o;if("number"!=typeof t||t!=t||t%1!=0||t<1)throw new TypeError("lcg()::invalid input argument. Array length must be a positive integer.");i=new Array(t);for(var s=0;s<t;s++)r=16807*(r^=e)%n,i[s]=r/n,r^=e;return i}}},470:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===n.call(t)},s=function(t){if(!t||"[object Object]"!==n.call(t))return!1;var r,i=e.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&e.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!i&&!o)return!1;for(r in t);return void 0===r||e.call(t,r)},a=function(t,e){r&&"__proto__"===e.name?r(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},u=function(t,n){if("__proto__"===n){if(!e.call(t,n))return;if(i)return i(t,n).value}return t[n]};t.exports=function t(){var e,n,r,i,h,c,l=arguments[0],f=1,p=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[1]||{},f=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});f<p;++f)if(null!=(e=arguments[f]))for(n in e)r=u(l,n),l!==(i=u(e,n))&&(d&&i&&(s(i)||(h=o(i)))?(h?(h=!1,c=r&&o(r)?r:[]):c=r&&s(r)?r:{},a(l,{name:n,newValue:t(d,c,i)})):void 0!==i&&a(l,{name:n,newValue:i}));return l}},19:(t,e,n)=>{"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(89)),r(n(845)),r(n(69)),r(n(85)),r(n(598)),r(n(384)),r(n(426)),r(n(749)),r(n(427)),r(n(793)),r(n(421)),r(n(138)),r(n(31)),r(n(867)),r(n(926)),r(n(565))},89:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(426),s=function(t){function e(e){var n=t.call(this)||this,r=e;return r.trigger&&(n.trigger=r.trigger),r.kick&&(n.kick=r.kick),r.drag&&(n.drag=r.drag),r.on&&(n.on=r.on),n.dragstart=n.dragStart=o.Layout.dragStart,n.dragend=n.dragEnd=o.Layout.dragEnd,n}return i(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(o.Layout);e.LayoutAdaptor=s,e.adaptor=function(t){return new s(t)}},565:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(426),i=n(598);e.gridify=function(t,e,n,r){return t.cola.start(0,0,0,10,!1),function(t,e,n,r){t.forEach((function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-n)}})),e.forEach((function(e){e.routerNode={bounds:e.bounds.inflate(-r),children:(void 0!==e.groups?e.groups.map((function(e){return t.length+e.id})):[]).concat(void 0!==e.leaves?e.leaves.map((function(t){return t.index})):[])}}));var o=t.concat(e).map((function(t,e){return t.routerNode.id=e,t.routerNode}));return new i.GridRouter(o,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},n-r)}(t.cola.nodes(),t.cola.groups(),n,r).routeEdges(t.powerGraph.powerEdges,e,(function(t){return t.source.routerNode.id}),(function(t){return t.target.routerNode.id}))},e.powerGraphGridLayout=function(t,e,n){var i;t.nodes.forEach((function(t,e){return t.index=e})),(new r.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups((function(t){(i=t).groups.forEach((function(t){return t.padding=n}))}));var o=t.nodes.length,s=[],a=t.nodes.slice(0);return a.forEach((function(t,e){return t.index=e})),i.groups.forEach((function(t){var e=t.index=t.id+o;a.push(t),void 0!==t.leaves&&t.leaves.forEach((function(t){return s.push({source:e,target:t.index})})),void 0!==t.groups&&t.groups.forEach((function(t){return s.push({source:e,target:t.id+o})}))})),i.powerEdges.forEach((function(t){s.push({source:t.source.index,target:t.target.index})})),(new r.Layout).size(e).nodes(a).links(s).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new r.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups((function(t){(i=t).groups.forEach((function(t){t.padding=n}))})).start(50,0,100,0,!1),powerGraph:i}}},845:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(509),i=n(374);e.d3adaptor=function(t){return!t||function(t){return t.version&&null!==t.version.match(/^3\./)}(t)?new r.D3StyleLayoutAdaptor:new i.D3StyleLayoutAdaptor(t)}},509:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(426),s=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var n=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(o.Layout.dragOrigin).on("dragstart.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",(function(t){o.Layout.drag(t,d3.event),n.resume()})).on("dragend.d3adaptor",o.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},e}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer((function(){return t.prototype.tick.call(e)}))},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(o.EventType[t],e),this},e}(o.Layout);e.D3StyleLayoutAdaptor=s,e.d3adaptor=function(){return new s}},374:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(426),s=function(t){function e(e){var n=t.call(this)||this;n.d3Context=e,n.event=e.dispatch(o.EventType[o.EventType.start],o.EventType[o.EventType.tick],o.EventType[o.EventType.end]);var r=n;return n.drag=function(){if(!t)var t=e.drag().subject(o.Layout.dragOrigin).on("start.d3adaptor",o.Layout.dragStart).on("drag.d3adaptor",(function(t){o.Layout.drag(t,e.event),r.resume()})).on("end.d3adaptor",o.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},n}return i(e,t),e.prototype.trigger=function(t){var e={type:o.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,n=this.d3Context.timer((function(){return t.prototype.tick.call(e)&&n.stop()}))},e.prototype.on=function(t,e){return"string"==typeof t?this.event.on(t,e):this.event.on(o.EventType[t],e),this},e}(o.Layout);e.D3StyleLayoutAdaptor=s},69:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();e.Locks=n;var r=function(){function t(t,e,r){void 0===r&&(r=null),this.D=e,this.G=r,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new i,this.project=null,this.x=t,this.k=t.length;var o=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new n,this.minD=Number.MAX_VALUE;for(var s,a=o;a--;)for(s=o;--s>a;){var u=e[a][s];u>0&&u<this.minD&&(this.minD=u)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),a=this.k;a--;){for(this.g[a]=new Array(o),this.H[a]=new Array(o),s=o;s--;)this.H[a][s]=new Array(o);this.Hd[a]=new Array(o),this.a[a]=new Array(o),this.b[a]=new Array(o),this.c[a]=new Array(o),this.d[a]=new Array(o),this.e[a]=new Array(o),this.ia[a]=new Array(o),this.ib[a]=new Array(o),this.xtmp[a]=new Array(o)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map((function(e){return e*(t.minD/n)}))},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),o=new Array(this.k),s=new Array(this.k),a=0,u=0;u<n;++u){for(r=0;r<this.k;++r)s[r]=this.g[r][u]=0;for(var h=0;h<n;++h)if(u!==h){for(var c=n;c--;){var l=0;for(r=0;r<this.k;++r){var f=i[r]=t[r][u]-t[r][h];l+=o[r]=f*f}if(l>1e-9)break;var p=this.offsetDir();for(r=0;r<this.k;++r)t[r][h]+=p[r]}var d=Math.sqrt(l),g=this.D[u][h],v=null!=this.G?this.G[u][h]:1;if(v>1&&d>g||!isFinite(g))for(r=0;r<this.k;++r)this.H[r][u][h]=0;else{v>1&&(v=1);var y=g*g,_=2*v*(d-g)/(y*d),m=d*d*d,w=2*-v/(y*m);for(isFinite(_)||console.log(_),r=0;r<this.k;++r)this.g[r][u]+=i[r]*_,s[r]-=this.H[r][u][h]=w*(m+g*(o[r]-l)+d*l)}}for(r=0;r<this.k;++r)a=Math.max(a,this.H[r][u][u]=s[r])}var b=this.snapGridSize/2,x=this.snapGridSize,k=this.snapStrength/(b*b),E=this.numGridSnapNodes;for(u=0;u<E;++u)for(r=0;r<this.k;++r){var A=this.x[r][u],S=A/x,M=S%1,P=S-M;-b<(f=Math.abs(M)<=.5?A-P*x:A>0?A-(P+1)*x:A-(P-1)*x)&&f<=b&&(this.scaleSnapByMaxH?(this.g[r][u]+=a*k*f,this.H[r][u][u]+=a*k):(this.g[r][u]+=k*f,this.H[r][u][u]+=k))}this.locks.isEmpty()||this.locks.apply((function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=a,e.g[r][n]-=a*(i[r]-t[r][n])}))}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var o=0;o<r;++o)e[i][o]=t[i][o]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var o=2;o<this.k;o++)this.takeDescentStep(n[o],r[o],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply((function(r,i){return n.e[r][i]=t[r][i]-e[r][i]}));var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply((function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,o=e.x[t][r]-i;n+=o*o,e.x[t][r]=i})),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,(function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2}))},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var o=0,s=0;s<this.k;++s){var a=this.x[s][e]-this.x[s][r];o+=a*a}o=Math.sqrt(o);var u=this.D[e][r];if(isFinite(u)){var h=u-o;t+=h*h/(u*u)}}return t},t.zeroDistance=1e-10,t}();e.Descent=r;var i=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();e.PseudoRandom=i},85:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(31),s=function(){};e.Point=s;var a=function(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r};e.LineSegment=a;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s);function h(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function c(t,e,n){return h(t,e,n)>0}function l(t,e,n){return h(t,e,n)<0}function f(t,e){var n,r,i,o,s=e.length-1;if(l(t,e[1],e[0])&&!c(t,e[s-1],e[0]))return 0;for(n=0,r=s;;){if(r-n==1)return c(t,e[n],e[r])?n:r;if((o=l(t,e[(i=Math.floor((n+r)/2))+1],e[i]))&&!c(t,e[i-1],e[i]))return i;c(t,e[n+1],e[n])?o||c(t,e[n],e[i])?r=i:n=i:o&&l(t,e[n],e[i])?r=i:n=i}}function p(t,e){var n,r,i,o,s=e.length-1;if(c(t,e[s-1],e[0])&&!l(t,e[1],e[0]))return 0;for(n=0,r=s;;){if(r-n==1)return l(t,e[n],e[r])?n:r;if(o=l(t,e[(i=Math.floor((n+r)/2))+1],e[i]),c(t,e[i-1],e[i])&&!o)return i;l(t,e[n+1],e[n])?o?l(t,e[n],e[i])?r=i:n=i:r=i:o?n=i:c(t,e[n],e[i])?r=i:n=i}}function d(t,e,n,r,i,o){var s,a;a=r(t[s=n(e[0],t)],e);for(var u=!1;!u;){for(u=!0;s===t.length-1&&(s=0),!i(e[a],t[s],t[s+1]);)++s;for(;0===a&&(a=e.length-1),!o(t[s],e[a],e[a-1]);)--a,u=!1}return{t1:s,t2:a}}function g(t,e){return d(t,e,f,p,c,l)}e.PolyPoint=u,e.isLeft=h,e.ConvexHull=function(t){var e,n=t.slice(0).sort((function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y})),r=t.length,i=n[0].x;for(e=1;e<r&&n[e].x===i;++e);var o=e-1,s=[];if(s.push(n[0]),o===r-1)n[o].y!==n[0].y&&s.push(n[o]);else{var a,u=r-1,c=n[r-1].x;for(e=r-2;e>=0&&n[e].x===c;e--);for(a=e+1,e=o;++e<=a;)if(!(h(n[0],n[a],n[e])>=0&&e<a)){for(;s.length>1&&!(h(s[s.length-2],s[s.length-1],n[e])>0);)s.length-=1;0!=e&&s.push(n[e])}u!=a&&s.push(n[u]);var l=s.length;for(e=a;--e>=o;)if(!(h(n[u],n[o],n[e])>=0&&e>o)){for(;s.length>l&&!(h(s[s.length-2],s[s.length-1],n[e])>0);)s.length-=1;0!=e&&s.push(n[e])}}return s},e.clockwiseRadialSweep=function(t,e,n){e.slice(0).sort((function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)})).forEach(n)},e.tangent_PolyPolyC=d,e.LRtangent_PolyPolyC=function(t,e){var n=g(e,t);return{t1:n.t2,t2:n.t1}},e.RLtangent_PolyPolyC=g,e.LLtangent_PolyPolyC=function(t,e){return d(t,e,p,p,l,l)},e.RRtangent_PolyPolyC=function(t,e){return d(t,e,f,f,c,c)};var v=function(t,e){this.t1=t,this.t2=e};e.BiTangent=v;var y=function(){};e.BiTangents=y;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(s);e.TVGPoint=_;var m=function(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this};e.VisibilityVertex=m;var w=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();e.VisibilityEdge=w;var b=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var n=t.length,r=0;r<n;r++){for(var i=t[r],o=0;o<i.length;++o){var s=i[o],a=new m(this.V.length,r,o,s);this.V.push(a),o>0&&this.E.push(new w(i[o-1].vv,a))}i.length>1&&this.E.push(new w(i[0].vv,i[i.length-1].vv))}for(r=0;r<n-1;r++){var u=t[r];for(o=r+1;o<n;o++){var h=t[o],c=k(u,h);for(var l in c){var f=c[l],p=u[f.t1],d=h[f.t2];this.addEdgeIfVisible(p,d,r,o)}}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new a(t.x,t.y,e.x,e.y),n,r)||this.E.push(new w(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n,r,i,o=this.P.length;this.V.push(new m(this.V.length,o,0,t));for(var s=0;s<o;++s)if(s!==e){var a=this.P[s],u=(n=t,i=void 0,(i=(r=a).slice(0)).push(r[0]),{rtan:f(n,i),ltan:p(n,i)});this.addEdgeIfVisible(t,a[u.ltan],e,s),this.addEdgeIfVisible(t,a[u.rtan],e,s)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&x(t,this.P[r]).length>0)return!0;return!1},t}();function x(t,e){for(var n=[],r=1,i=e.length;r<i;++r){var s=o.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[r-1].x,e[r-1].y,e[r].x,e[r].y);s&&n.push(s)}return n}function k(t,e){for(var n=t.length-1,r=e.length-1,i=new y,o=0;o<n;++o)for(var s=0;s<r;++s){var a=t[0==o?n-1:o-1],u=t[o],c=t[o+1],l=e[0==s?r-1:s-1],f=e[s],p=e[s+1],d=h(a,u,f),g=h(u,l,f),_=h(u,f,p),m=h(l,f,u),w=h(f,a,u),b=h(f,u,c);d>=0&&g>=0&&_<0&&m>=0&&w>=0&&b<0?i.ll=new v(o,s):d<=0&&g<=0&&_>0&&m<=0&&w<=0&&b>0?i.rr=new v(o,s):d<=0&&g>0&&_<=0&&m>=0&&w<0&&b>=0?i.rl=new v(o,s):d>=0&&g<0&&_>=0&&m<=0&&w>0&&b<=0&&(i.lr=new v(o,s))}return i}function E(t,e){return!t.every((function(t){return!function(t,e){for(var n=1,r=e.length;n<r;++n)if(l(e[n-1],e[n],t))return!1;return!0}(t,e)}))}e.TangentVisibilityGraph=b,e.tangents=k,e.polysOverlap=function(t,e){if(E(t,e))return!0;if(E(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],o=t[n-1];if(x(new a(o.x,o.y,i.x,i.y),e).length>0)return!0}return!1}},598:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=n(926),o=n(867),s=function(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length};e.NodeWrapper=s;var a=function(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i};e.Vert=a;var u=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),o=t.findMatch(e,i);r.length>=o.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=o.length,this.si=o.si,this.ti=n.length-o.ti-o.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},o=new Array(n),s=0;s<n;s++){o[s]=new Array(r);for(var a=0;a<r;a++)if(t[s]===e[a]){var u=o[s][a]=0===s||0===a?1:o[s-1][a-1]+1;u>i.length&&(i.length=u,i.si=s-u+1,i.ti=a-u+1)}else o[s][a]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();e.LongestCommonSubsequence=u;var h=function(){function t(t,e,n){var i=this;void 0===n&&(n=12),this.originalnodes=t,this.groupPadding=n,this.leaves=null,this.nodes=t.map((function(t,n){return new s(n,e.getBounds(t),e.getChildren(t))})),this.leaves=this.nodes.filter((function(t){return t.leaf})),this.groups=this.nodes.filter((function(t){return!t.leaf})),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach((function(t){return t.children.forEach((function(e){return i.nodes[e].parent=t}))})),this.root={children:[]},this.nodes.forEach((function(t){void 0===t.parent&&(t.parent=i.root,i.root.children.push(t.id)),t.ports=[]})),this.backToFront=this.nodes.slice(0),this.backToFront.sort((function(t,e){return i.getDepth(t)-i.getDepth(e)})),this.backToFront.slice(0).reverse().filter((function(t){return!t.leaf})).forEach((function(t){var e=r.Rectangle.empty();t.children.forEach((function(t){return e=e.union(i.nodes[t].rect)})),t.rect=e.inflate(i.groupPadding)}));var o=this.midPoints(this.cols.map((function(t){return t.pos}))),u=this.midPoints(this.rows.map((function(t){return t.pos}))),h=o[0],c=o[o.length-1],l=u[0],f=u[u.length-1],p=this.rows.map((function(t){return{x1:h,x2:c,y1:t.pos,y2:t.pos}})).concat(u.map((function(t){return{x1:h,x2:c,y1:t,y2:t}}))),d=this.cols.map((function(t){return{x1:t.pos,x2:t.pos,y1:l,y2:f}})).concat(o.map((function(t){return{x1:t,x2:t,y1:l,y2:f}}))),g=p.concat(d);g.forEach((function(t){return t.verts=[]})),this.verts=[],this.edges=[],p.forEach((function(t){return d.forEach((function(e){var n=new a(i.verts.length,e.x1,t.y1);t.verts.push(n),e.verts.push(n),i.verts.push(n);for(var r=i.backToFront.length;r-- >0;){var o=i.backToFront[r],s=o.rect,u=Math.abs(n.x-s.cx()),h=Math.abs(n.y-s.cy());if(u<s.width()/2&&h<s.height()/2){n.node=o;break}}}))})),g.forEach((function(t,e){i.nodes.forEach((function(e,n){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach((function(n,r){var o=new a(i.verts.length,n.x,n.y,e,t);i.verts.push(o),t.verts.push(o),e.ports.push(o)}))}));var n=Math.abs(t.y1-t.y2)<.1,r=function(t,e){return n?e.x-t.x:e.y-t.y};t.verts.sort(r);for(var o=1;o<t.verts.length;o++){var s=t.verts[o-1],u=t.verts[o];s.node&&s.node===u.node&&s.node.leaf||i.edges.push({source:s.id,target:u.id,length:Math.abs(r(s,u))})}}))}return t.prototype.avg=function(t){return t.reduce((function(t,e){return t+e}))/t.length},t.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter((function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)})),i={nodes:r,pos:this.avg(r.map((function(e){return e.rect["c"+t]()})))};e.push(i),i.nodes.forEach((function(t){return n.splice(n.indexOf(t),1)}))}return e.sort((function(t,e){return t.pos-e.pos})),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},t.prototype.findLineage=function(t){var e=[t];do{t=t.parent,e.push(t)}while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},t.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach((function(t){return i[t.id]={}}));var o=r.commonAncestor.children.filter((function(t){return!(t in i)}));return r.lineages.filter((function(t){return t.parent!==r.commonAncestor})).forEach((function(t){return o=o.concat(t.parent.children.filter((function(e){return e!==t.id})))})),o.map((function(t){return n.nodes[t]}))},t.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=t[i],s=0;s<o.length;s++){(l=o[s]).edgeid=i,l.i=s;var a=l[1][e]-l[0][e];Math.abs(a)<.1&&r.push(l)}r.sort((function(t,n){return t[0][e]-n[0][e]}));for(var u=[],h=null,c=0;c<r.length;c++){var l=r[c];(!h||Math.abs(l[0][e]-h.pos)>.1)&&(h={pos:l[0][e],segments:[]},u.push(h)),h.segments.push(l)}return u},t.nudgeSegs=function(t,e,n,r,o,s){var a=r.length;if(!(a<=1)){for(var u=r.map((function(e){return new i.Variable(e[0][t])})),h=[],c=0;c<a;c++)for(var l=0;l<a;l++)if(c!==l){var f=r[c],p=r[l],d=f.edgeid,g=p.edgeid,v=-1,y=-1;"x"==t?o(d,g)&&(f[0][e]<f[1][e]?(v=l,y=c):(v=c,y=l)):o(d,g)&&(f[0][e]<f[1][e]?(v=c,y=l):(v=l,y=c)),v>=0&&h.push(new i.Constraint(u[v],u[y],s))}new i.Solver(u,h).solve(),u.forEach((function(e,i){var o=r[i],s=e.position();o[0][t]=o[1][t]=s;var a=n[o.edgeid];o.i>0&&(a[o.i-1][1][t]=s),o.i<a.length-1&&(a[o.i+1][0][t]=s)}))}},t.nudgeSegments=function(e,n,r,i,o){for(var s=t.getSegmentSets(e,n,r),a=0;a<s.length;a++){for(var u=s[a],h=[],c=0;c<u.segments.length;c++){var l=u.segments[c];h.push({type:0,s:l,pos:Math.min(l[0][r],l[1][r])}),h.push({type:1,s:l,pos:Math.max(l[0][r],l[1][r])})}h.sort((function(t,e){return t.pos-e.pos+t.type-e.type}));var f=[],p=0;h.forEach((function(s){0===s.type?(f.push(s.s),p++):p--,0==p&&(t.nudgeSegs(n,r,e,f,i,o),f=[])}))}},t.prototype.routeEdges=function(e,n,r,i){var o=this,s=e.map((function(t){return o.route(r(t),i(t))})),a=t.orderEdges(s),u=s.map((function(e){return t.makeSegments(e)}));return t.nudgeSegments(u,"x","y",a,n),t.nudgeSegments(u,"y","x",a,n),t.unreverseEdges(u,s),u},t.unreverseEdges=function(t,e){t.forEach((function(t,n){e[n].reversed&&(t.reverse(),t.forEach((function(t){t.reverse()})))}))},t.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},t.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},t.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},t.orderEdges=function(e){for(var n=[],r=0;r<e.length-1;r++)for(var i=r+1;i<e.length;i++){var o,s,a,h=e[r],c=e[i],l=new u(h,c);0!==l.length&&(l.reversed&&(c.reverse(),c.reversed=!0,l=new u(h,c)),(l.si<=0||l.ti<=0)&&(l.si+l.length>=h.length||l.ti+l.length>=c.length)?n.push({l:r,r:i}):(l.si+l.length>=h.length||l.ti+l.length>=c.length?(o=h[l.si+1],a=h[l.si-1],s=c[l.ti-1]):(o=h[l.si+l.length-2],s=h[l.si+l.length],a=c[l.ti+l.length]),t.isLeft(o,s,a)?n.push({l:i,r}):n.push({l:r,r:i})))}return t.getOrder(n)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001},r=[],i=e(t[0]),o=1;o<t.length;o++){var s=e(t[o]),a=o<t.length-1?t[o+1]:null;a&&n(i,s,a)||(r.push([i,s]),i=s)}return r},t.prototype.route=function(t,e){var n=this,r=this.nodes[t],i=this.nodes[e];this.obstacles=this.siblingObstacles(r,i);var s={};this.obstacles.forEach((function(t){return s[t.id]=t})),this.passableEdges=this.edges.filter((function(t){var e=n.verts[t.source],r=n.verts[t.target];return!(e.node&&e.node.id in s||r.node&&r.node.id in s)}));for(var a=1;a<r.ports.length;a++){var u=r.ports[0].id,h=r.ports[a].id;this.passableEdges.push({source:u,target:h,length:0})}for(a=1;a<i.ports.length;a++)u=i.ports[0].id,h=i.ports[a].id,this.passableEdges.push({source:u,target:h,length:0});var c=new o.Calculator(this.verts.length,this.passableEdges,(function(t){return t.source}),(function(t){return t.target}),(function(t){return t.length})).PathFromNodeToNodeWithPrevCost(r.ports[0].id,i.ports[0].id,(function(t,e,o){var s=n.verts[t],a=n.verts[e],u=n.verts[o],h=Math.abs(u.x-s.x),c=Math.abs(u.y-s.y);return s.node===r&&s.node===a.node||a.node===i&&a.node===u.node?0:h>1&&c>1?1e3:0})),l=c.reverse().map((function(t){return n.verts[t]}));return l.push(this.nodes[i.id].ports[0]),l.filter((function(t,e){return!(e<l.length-1&&l[e+1].node===r&&t.node===r||e>0&&t.node===i&&l[e-1].node===i)}))},t.getRoutePath=function(e,n,r,i){var o,s,a,u={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var h=0;h<e.length;h++){var c=(o=e[h])[1].x,l=o[1].y,f=c-o[0].x,p=l-o[0].y;if(h<e.length-1){Math.abs(f)>0?c-=f/Math.abs(f)*n:l-=p/Math.abs(p)*n,u.routepath+="L "+c+" "+l+" ";var d=e[h+1],g=d[0].x,v=d[0].y;f=d[1].x-g,p=d[1].y-v;var y,_,m=t.angleBetween2Lines(o,d)<0?1:0;Math.abs(f)>0?(y=g+f/Math.abs(f)*n,_=v):(y=g,_=v+p/Math.abs(p)*n);var w=Math.abs(y-c),b=Math.abs(_-l);u.routepath+="A "+w+" "+b+" 0 0 "+m+" "+y+" "+_+" "}else{var x=[c,l];Math.abs(f)>0?(s=[c-=f/Math.abs(f)*i,l+r],a=[c,l-r]):(s=[c+r,l-=p/Math.abs(p)*i],a=[c-r,l]),u.routepath+="L "+c+" "+l+" ",i>0&&(u.arrowpath="M "+x[0]+" "+x[1]+" L "+s[0]+" "+s[1]+" L "+a[0]+" "+a[1])}}else c=(o=e[0])[1].x,l=o[1].y,f=c-o[0].x,p=l-o[0].y,x=[c,l],Math.abs(f)>0?(s=[c-=f/Math.abs(f)*i,l+r],a=[c,l-r]):(s=[c+r,l-=p/Math.abs(p)*i],a=[c-r,l]),u.routepath+="L "+c+" "+l+" ",i>0&&(u.arrowpath="M "+x[0]+" "+x[1]+" L "+s[0]+" "+s[1]+" L "+a[0]+" "+a[1]);return u},t}();e.GridRouter=h},384:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=10,r=(1+Math.sqrt(5))/2,i=1e-4;e.applyPacking=function(t,e,o,s,a,u){void 0===a&&(a=1),void 0===u&&(u=!0);var h=0,c=0,l=e,f=o,p=(a=void 0!==a?a:1,s=void 0!==s?s:0,0),d=0,g=0,v=0,y=[];function _(t,e){y=[],p=0,d=0,v=c;for(var n=0;n<t.length;n++)m(t[n],e);return Math.abs(p/d-a)}function m(t,e){for(var r=void 0,o=0;o<y.length;o++)if(y[o].space_left>=t.height&&y[o].x+y[o].width+t.width+n-e<=i){r=y[o];break}y.push(t),void 0!==r?(t.x=r.x+r.width+n,t.y=r.bottom,t.space_left=t.height,t.bottom=t.y,r.space_left-=t.height+n,r.bottom+=t.height+n):(t.y=v,v+=t.height+n,t.x=h,t.bottom=t.y,t.space_left=t.height),t.y+t.height-d>-1e-4&&(d=t.y+t.height-c),t.x+t.width-p>-1e-4&&(p=t.x+t.width-h)}0!=t.length&&(function(t){t.forEach((function(t){var e,n,r,i,o;e=t,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=0,o=0,e.array.forEach((function(t){var e=void 0!==t.width?t.width:s,a=void 0!==t.height?t.height:s;e/=2,a/=2,i=Math.max(t.x+e,i),n=Math.min(t.x-e,n),o=Math.max(t.y+a,o),r=Math.min(t.y-a,r)})),e.width=i-n,e.height=o-r}))}(t),function(t,e){var o=Number.POSITIVE_INFINITY,s=0;t.sort((function(t,e){return e.height-t.height}));for(var a=v=g=t.reduce((function(t,e){return t.width<e.width?t.width:e.width})),u=y=function(t){var e=0;return t.forEach((function(t){return e+=t.width+n})),e}(t),h=0,c=Number.MAX_VALUE,l=Number.MAX_VALUE,f=-1,p=Number.MAX_VALUE,d=Number.MAX_VALUE;p>g||d>i;){if(1!=f){var v=u-(u-a)/r;c=_(t,v)}if(0!=f){var y=a+(u-a)/r;l=_(t,y)}if(p=Math.abs(v-y),d=Math.abs(c-l),c<o&&(o=c,s=v),l<o&&(o=l,s=y),c>l?(a=v,v=y,c=l,f=1):(u=y,y=v,l=c,f=0),h++>100)break}_(t,s)}(t),u&&function(t){t.forEach((function(t){var e={x:0,y:0};t.array.forEach((function(t){e.x+=t.x,e.y+=t.y})),e.x/=t.array.length,e.y/=t.array.length;var n=e.x-t.width/2,r=e.y-t.height/2,i=t.x-n+l/2-p/2,o=t.y-r+f/2-d/2;t.array.forEach((function(t){t.x+=i,t.y+=o}))}))}(t))},e.separateGraphs=function(t,e){for(var n={},r={},i=[],o=0,s=0;s<e.length;s++){var a=e[s],u=a.source,h=a.target;r[u.index]?r[u.index].push(h):r[u.index]=[h],r[h.index]?r[h.index].push(u):r[h.index]=[u]}for(s=0;s<t.length;s++){var c=t[s];n[c.index]||l(c,!0)}function l(t,e){if(void 0===n[t.index]){e&&(o++,i.push({array:[]})),n[t.index]=o,i[o-1].array.push(t);var s=r[t.index];if(s)for(var a=0;a<s.length;a++)l(s[a],!1)}}return i}},426:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(793),o=n(427),s=n(69),a=n(31),u=n(867),h=n(85),c=n(384);function l(t){return void 0!==t.leaves||void 0!==t.groups}!function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(r=e.EventType||(e.EventType={}));var f=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[r[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:r.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,n=this._nodes.length;for(this._links.length,this._descent.locks.clear(),e=0;e<n;++e)if((t=this._nodes[e]).fixed){void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y);var i=[t.px,t.py];this._descent.locks.add(e,i)}var o=this._descent.rungeKutta();return 0===o?this._alpha=0:void 0!==this._lastStress&&(this._alpha=o),this._lastStress=o,this.updateNodePositions(),this.trigger({type:r.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)(t=this._nodes[r]).x=e[r],t.y=n[r]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach((function(t){e=Math.max(e,t.source,t.target)})),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach((function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach((function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)})),void 0!==t.groups&&t.groups.forEach((function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)}))})),this._rootGroup.leaves=this._nodes.filter((function(t){return void 0===t.parent})),this._rootGroup.groups=this._groups.filter((function(t){return void 0===t.parent})),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=i.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:r.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance((function(e){return t*e.length})),this._linkLengthCalculator=function(){return o.symmetricDiffLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.jaccardLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance((function(e){return t*e.length})),this._linkLengthCalculator=function(){return o.jaccardLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.start=function(e,n,r,i,h,c){var l=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===h&&(h=!0),void 0===c&&(c=!0);var f,p=this.nodes().length,d=p+2*this._groups.length,g=(this._links.length,this._canvasSize[0]),v=this._canvasSize[1],y=new Array(d),_=new Array(d),m=null,w=this._avoidOverlaps;this._nodes.forEach((function(t,e){t.index=e,void 0===t.x&&(t.x=g/2,t.y=v/2),y[e]=t.x,_[e]=t.y})),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?f=this._distanceMatrix:(f=new u.Calculator(d,this._links,t.getSourceIndex,t.getTargetIndex,(function(t){return l.getLinkLength(t)})).DistanceMatrix(),m=s.Descent.createSquareMatrix(d,(function(){return 2})),this._links.forEach((function(t){"number"==typeof t.source&&(t.source=l._nodes[t.source]),"number"==typeof t.target&&(t.target=l._nodes[t.target])})),this._links.forEach((function(e){var n=t.getSourceIndex(e),r=t.getTargetIndex(e);m[n][r]=m[r][n]=e.weight||1})));var b=s.Descent.createSquareMatrix(d,(function(t,e){return f[t][e]}));if(this._rootGroup&&void 0!==this._rootGroup.groups){var x=p;this._groups.forEach((function(t){!function(t,e,n,r){m[t][e]=m[e][t]=n,b[t][e]=b[e][t]=.1}(x,x+1,l._groupCompactness),y[x]=0,_[x++]=0,y[x]=0,_[x++]=0}))}else this._rootGroup={leaves:this._nodes,groups:[]};var k=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,k=k.concat(o.generateDirectedEdgeConstraints(p,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new s.Descent([y,_],b),this._descent.locks.clear(),x=0;x<p;++x){var E=this._nodes[x];if(E.fixed){E.px=E.x,E.py=E.y;var A=[E.x,E.y];this._descent.locks.add(x,A)}}if(this._descent.threshold=this._threshold,this.initialLayout(e,y,_),k.length>0&&(this._descent.project=new a.Projection(this._nodes,this._groups,this._rootGroup,k).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(g,v,c),this.avoidOverlaps(w),w&&(this._nodes.forEach((function(t,e){t.x=y[e],t.y=_[e]})),this._descent.project=new a.Projection(this._nodes,this._groups,this._rootGroup,k,!0).projectFunctions(),this._nodes.forEach((function(t,e){y[e]=t.x,_[e]=t.y}))),this._descent.G=m,this._descent.run(r),i){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=p,this._descent.scaleSnapByMaxH=p!=d;var S=s.Descent.createSquareMatrix(d,(function(t,e){return t>=p||e>=p?m[t][e]:0}));this._descent.G=S,this._descent.run(i)}return this.updateNodePositions(),this.separateOverlappingComponents(g,v,c),h?this.resume():this},t.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,o=this._links.map((function(t){return{source:t.source.index,target:t.target.index}})),s=this._nodes.map((function(t){return{index:t.index}}));this._groups.forEach((function(t,e){s.push({index:t.index=i+e})})),this._groups.forEach((function(t,e){void 0!==t.leaves&&t.leaves.forEach((function(e){return o.push({source:t.index,target:e.index})})),void 0!==t.groups&&t.groups.forEach((function(e){return o.push({source:t.index,target:e.index})}))})),(new t).size(this.size()).nodes(s).links(o).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach((function(t){n[t.index]=s[t.index].x,r[t.index]=s[t.index].y}))}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e,n){var r=this;if(void 0===n&&(n=!0),!this._distanceMatrix&&this._handleDisconnected){var i=this._descent.x[0],o=this._descent.x[1];this._nodes.forEach((function(t,e){t.x=i[e],t.y=o[e]}));var s=c.separateGraphs(this._nodes,this._links);c.applyPacking(s,t,e,this._defaultNodeSize,1,n),this._nodes.forEach((function(t,e){r._descent.x[0][e]=t.x,r._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))}))}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new h.TangentVisibilityGraph(this._nodes.map((function(e){return e.bounds.inflate(-t).vertices()})))},t.prototype.routeEdge=function(t,e,n){void 0===e&&(e=5);var r=[],i=new h.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),o={x:t.source.x,y:t.source.y},s={x:t.target.x,y:t.target.y},c=i.addPoint(o,t.source.index),l=i.addPoint(s,t.target.index);i.addEdgeIfVisible(o,s,t.source.index,t.target.index),void 0!==n&&n(i);var f=new u.Calculator(i.V.length,i.E,(function(t){return t.source.id}),(function(t){return t.target.id}),(function(t){return t.length()})).PathFromNodeToNode(c.id,l.id);if(1===f.length||f.length===i.V.length){var p=a.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,e);r=[p.sourceIntersection,p.arrowStart]}else{for(var d=f.length-2,g=i.V[f[d]].p,v=i.V[f[0]].p,y=(r=[t.source.innerBounds.rayIntersection(g.x,g.y)],d);y>=0;--y)r.push(i.V[f[y]].p);r.push(a.makeEdgeTo(v,t.target.innerBounds,e))}return r},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){l(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,n){void 0!==e.leaves&&e.leaves.forEach((function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-n.x,e._dragGroupOffsetY=e.y-n.y})),void 0!==e.groups&&e.groups.forEach((function(e){return t.storeOffset(e,n)}))},t.dragOrigin=function(t){return l(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,n){l(e)?(void 0!==e.leaves&&e.leaves.forEach((function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y})),void 0!==e.groups&&e.groups.forEach((function(e){return t.drag(e,n)}))):(e.px=n.x,e.py=n.y)},t.dragEnd=function(e){l(e)?(void 0!==e.leaves&&e.leaves.forEach((function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY})),void 0!==e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}();e.Layout=f},749:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(867),i=n(69),o=n(31),s=n(427),a=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce((function(t,n){var r=n[e.target]-n[e.source];return t+r*r}),0))},t}();e.Link3D=a;e.Node3D=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n};var u=function(){function t(e,n,r){var i=this;void 0===r&&(r=1),this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var o=0;o<t.k;++o)this.result[o]=new Array(e.length);e.forEach((function(e,n){for(var r=0,o=t.dims;r<o.length;r++){var s=o[r];void 0===e[s]&&(e[s]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z}))}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var n=this.nodes.length,a=new h;this.useJaccardLinkLengths&&s.jaccardLinkLengths(this.links,a,1.5),this.links.forEach((function(t){return t.length*=e.idealLinkLength}));var u=new r.Calculator(n,this.links,(function(t){return t.source}),(function(t){return t.target}),(function(t){return t.length})).DistanceMatrix(),c=i.Descent.createSquareMatrix(n,(function(t,e){return u[t][e]})),l=i.Descent.createSquareMatrix(n,(function(){return 2}));this.links.forEach((function(t){var e=t.source,n=t.target;return l[e][n]=l[n][e]=1})),this.descent=new i.Descent(this.result,c),this.descent.threshold=.001,this.descent.G=l,this.constraints&&(this.descent.project=new o.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var f=0;f<this.nodes.length;f++){var p=this.nodes[f];p.fixed&&this.descent.locks.add(f,[p.x,p.y,p.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t.dims=["x","y","z"],t.k=t.dims.length,t}();e.Layout3D=u;var h=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()},427:(t,e)=>{"use strict";function n(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function r(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function i(t,e,n,r){var i=function(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach((function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)})),n}(t,r);t.forEach((function(t){var o=i[r.getSourceIndex(t)],s=i[r.getTargetIndex(t)];r.setLength(t,1+e*n(o,s))}))}function o(t,e,n){var r=[],i=0,o=[],s=[];function a(t){t.index=t.lowlink=i++,o.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var r=n[e];void 0===r.index?(a(r),t.lowlink=Math.min(t.lowlink,r.lowlink)):r.onStack&&(t.lowlink=Math.min(t.lowlink,r.index))}if(t.lowlink===t.index){for(var u=[];o.length&&((r=o.pop()).onStack=!1,u.push(r),r!==t););s.push(u.map((function(t){return t.id})))}}for(var u=0;u<t;u++)r.push({id:u,out:[]});for(var h=0,c=e;h<c.length;h++){var l=c[h],f=r[n.getSourceIndex(l)],p=r[n.getTargetIndex(l)];f.out.push(p)}for(var d=0,g=r;d<g.length;d++){var v=g[d];void 0===v.index&&a(v)}return s}Object.defineProperty(e,"__esModule",{value:!0}),e.symmetricDiffLinkLengths=function(t,e,o){void 0===o&&(o=1),i(t,o,(function(t,e){return Math.sqrt(n(t,e)-r(t,e))}),e)},e.jaccardLinkLengths=function(t,e,o){void 0===o&&(o=1),i(t,o,(function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:r(t,e)/n(t,e)}),e)},e.generateDirectedEdgeConstraints=function(t,e,n,r){var i=o(t,e,r),s={};i.forEach((function(t,e){return t.forEach((function(t){return s[t]=e}))}));var a=[];return e.forEach((function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t);s[e]!==s[i]&&a.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})})),a},e.stronglyConnectedComponents=o},793:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){this.source=t,this.target=e,this.type=n};e.PowerEdge=n;var r=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new s);for(var a=0;a<t;++a)this.roots[0].add(this.modules[a]=new o(a))}this.R=e.length,e.forEach((function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],o=n.getType(t);e.outgoing.add(o,r),r.incoming.add(o,e)}))}return t.prototype.initModulesFromGroup=function(t){var e=new s;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new o(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var u=0;u<t.groups.length;++u){var h=t.groups[u],c={};for(var l in h)"leaves"!==l&&"groups"!==l&&h.hasOwnProperty(l)&&(c[l]=h[l]);e.add(new o(-1-u,new a,new a,this.initModulesFromGroup(h),c))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),a=new s;a.add(t),a.add(e);var u=new o(this.modules.length,i,r,a);this.modules.push(u);var h=function(n,r,i){n.forAll((function(n,o){n.forAll((function(n){var s=n[r];s.add(o,u),s.remove(o,t),s.remove(o,e),t[i].remove(o,n),e[i].remove(o,n)}))}))};return h(i,"incoming","outgoing"),h(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(u),u},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,o=0,s=n-1;o<s;++o)for(var a=o+1;a<n;++a){var u=e[o],h=e[a];r[i]={id:i,nEdges:this.nEdges(u,h),a:u,b:h},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort((function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges}))[0];if(!(e.nEdges>=this.R))return this.merge(e.a,e.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var e=this,r=[];return i(this.roots[0],{},r),this.allEdges().forEach((function(i){var o=e.modules[i.source],s=e.modules[i.target];t.push(new n(void 0===o.gid?i.source:r[o.gid],void 0===s.gid?i.target:r[s.gid],i.type))})),r},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll((function(e){e.getEdges(n),t.getEdges(e.children,n)}))},t}();function i(t,e,n){t.forAll((function(t){if(t.isLeaf())e.leaves||(e.leaves=[]),e.leaves.push(t.id);else{var r=e;if(t.gid=n.length,!t.isIsland()||t.isPredefined()){if(r={id:t.gid},t.isPredefined())for(var o in t.definition)r[o]=t.definition[o];e.groups||(e.groups=[]),e.groups.push(t.gid),n.push(r)}i(t.children,r,n)}}))}e.Configuration=r;var o=function(){function t(t,e,n,r,i){void 0===e&&(e=new a),void 0===n&&(n=new a),void 0===r&&(r=new s),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll((function(r,i){r.forAll((function(r){t.push(new n(e.id,r.id,i))}))}))},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();e.Module=o;var s=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var n=new t;return n.table=function(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}(this.table,e.table),n},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll((function(e){e.isPredefined()||t.push(e)})),t},t}();e.ModuleSet=s;var a=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules((function(n){e||n.id!=t||(e=!0)})),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new s).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll((function(e,n){return e.forAll(t)}))},t.prototype.intersection=function(e){var n=new t;return this.forAll((function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),o=i.count();o>0&&(n.sets[r]=i,n.n+=o)}})),n},t}();e.LinkSets=a,e.getGroups=function(t,e,n,i){for(var o=t.length,s=new r(o,e,n,i);s.greedyMerge(););var a=[],u=s.getGroupHierarchy(a);return a.forEach((function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")})),{groups:u,powerEdges:a}}},421:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach((function(e){return e.forEach(t)})))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce((function(t,e){return t+e.count()}),0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every((function(n){return t(e.elem,n.elem)&&n.isHeap(t)}))},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var o=e.removeMin(i);e.elem=o.elem,e.subheaps=o.subheaps,null!==r&&null!==o.elem&&r(e.elem,e);var s=new t(n);return null!==r&&r(n,s),this.merge(s,i)},t}();e.PairingHeap=n;var r=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i,o=0;i=e[o];++o)t=new n(i),this.root=this.empty()?t:this.root.merge(t,this.lessThan);return t},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();e.PriorityQueue=r},138:function(t,e){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){var e=this._comparator;return this._bound(t,(function(t,n){return e(n,t)}))},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new o(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var o=r._ancestors.length-1;o>=0;--o)if(e(t,(n=r._ancestors[o]).data)>0)return r._cursor=n,r._ancestors.length=o,r;return r._ancestors.length=0,r},t}();e.TreeBase=i;var o=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();e.Iterator=o;var s=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),a=function(t){function e(e){var n=t.call(this)||this;return n._root=null,n._comparator=e,n.size=0,n}return r(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new s(t),n=!0,this.size++;else{var r=new s(void 0),i=!1,o=!1,a=null,u=r,h=null,c=this._root;for(u.right=this._root;;){if(null===c?(c=new s(t),h.set_child(i,c),n=!0,this.size++):e.is_red(c.left)&&e.is_red(c.right)&&(c.red=!0,c.left.red=!1,c.right.red=!1),e.is_red(c)&&e.is_red(h)){var l=u.right===a;c===h.get_child(o)?u.set_child(l,e.single_rotate(a,!o)):u.set_child(l,e.double_rotate(a,!o))}var f=this._comparator(c.data,t);if(0===f)break;o=i,i=f<0,null!==a&&(u=a),a=h,h=c,c=c.get_child(i)}this._root=r.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new s(void 0),r=n;r.right=this._root;for(var i=null,o=null,a=null,u=!0;null!==r.get_child(u);){var h=u;o=i,i=r,r=r.get_child(u);var c=this._comparator(t,r.data);if(u=c>0,0===c&&(a=r),!e.is_red(r)&&!e.is_red(r.get_child(u)))if(e.is_red(r.get_child(!u))){var l=e.single_rotate(r,u);i.set_child(h,l),i=l}else if(!e.is_red(r.get_child(!u))){var f=i.get_child(!h);if(null!==f)if(e.is_red(f.get_child(!h))||e.is_red(f.get_child(h))){var p=o.right===i;e.is_red(f.get_child(h))?o.set_child(p,e.double_rotate(i,h)):e.is_red(f.get_child(!h))&&o.set_child(p,e.single_rotate(i,h));var d=o.get_child(p);d.red=!0,r.red=!0,d.left.red=!1,d.right.red=!1}else i.red=!1,f.red=!0,r.red=!0}}return null!==a&&(a.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==a},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(i);e.RBTree=a},31:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(926),s=n(138);function a(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce((function(t,e){return e.bounds.union(t)}),u.empty()):u.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce((function(t,e){return a(e).union(t)}),t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}e.computeGroupBounds=a;var u=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var o=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],s=[],a=0;a<4;++a){var u=t.lineIntersection(e,n,r,i,o[a][0],o[a][1],o[a][2],o[a][3]);null!==u&&s.push({x:u.x,y:u.y})}return s},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},t.lineIntersection=function(t,e,n,r,i,o,s,a){var u=n-t,h=s-i,c=r-e,l=a-o,f=l*u-h*c;if(0==f)return null;var p=t-i,d=e-o,g=(h*d-l*p)/f,v=(u*d-c*p)/f;return g>=0&&g<=1&&v>=0&&v<=1?{x:t+g*u,y:e+g*c}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();e.Rectangle=u,e.makeEdgeBetween=function(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=i.x-r.x,s=i.y-r.y,a=Math.sqrt(o*o+s*s),u=a-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+u*o/a,y:r.y+u*s/a}}},e.makeEdgeTo=function(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,o=r.y-t.y,s=Math.sqrt(i*i+o*o);return{x:r.x-n*i/s,y:r.y-n*o/s}};var h=function(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=f(),this.next=f()},c=function(t,e,n){this.isOpen=t,this.v=e,this.pos=n};function l(t,e){return t.pos>e.pos?1:t.pos<e.pos||t.isOpen?-1:e.isOpen?1:0}function f(){return new s.RBTree((function(t,e){return t.pos-e.pos}))}var p={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new u(n-r/2,n+r/2,t,e)},findNeighbours:function(t,e){var n=function(n,r){for(var i,o=e.findIter(t);null!==(i=o[n]());){var s=i.r.overlapX(t.r);if((s<=0||s<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),s<=0)break}};n("next","prev"),n("prev","next")}},d={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new u(t,e,n-r/2,n+r/2)},findNeighbours:function(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}};function g(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,o=void 0!==t.groups?t.groups.length:0,s=void 0!==t.leaves?t.leaves.length:0,a=o?t.groups.reduce((function(t,r){return t.concat(g(r,e,n,!0))}),[]):[],u=(r?2:0)+s+o,h=new Array(u),c=new Array(u),l=0,f=function(t,e){c[l]=t,h[l++]=e};if(r){var p=t.bounds,d=e.getCentre(p),y=e.getSize(p)/2,_=e.getOpen(p),m=e.getClose(p),w=d-y+i/2,b=d+y-i/2;t.minVar.desiredPosition=w,f(e.makeRect(_,m,w,i),t.minVar),t.maxVar.desiredPosition=b,f(e.makeRect(_,m,b,i),t.maxVar)}s&&t.leaves.forEach((function(t){return f(t.bounds,t.variable)})),o&&t.groups.forEach((function(t){var n=t.bounds;f(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)}));var x=v(c,h,e,n);return o&&(h.forEach((function(t){t.cOut=[],t.cIn=[]})),x.forEach((function(t){t.left.cOut.push(t),t.right.cIn.push(t)})),t.groups.forEach((function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach((function(t){return t.gap+=n})),t.minVar.cOut.forEach((function(e){e.left=t.maxVar,e.gap+=n}))}))),a.concat(x)}function v(t,e,n,r){var i,s=t.length,a=2*s;console.assert(e.length>=s);var u=new Array(a);for(i=0;i<s;++i){var p=t[i],d=new h(e[i],p,n.getCentre(p));u[i]=new c(!0,d,n.getOpen(p)),u[i+s]=new c(!1,d,n.getClose(p))}u.sort(l);var g=new Array,v=f();for(i=0;i<a;++i){var y=u[i];if(d=y.v,y.isOpen)v.insert(d),n.findNeighbours(d,v);else{v.remove(d);var _=function(t,e){var i=(n.getSize(t.r)+n.getSize(e.r))/2+r;g.push(new o.Constraint(t.v,e.v,i))},m=function(t,e,n){for(var r,i=d[t].iterator();null!==(r=i[t]());)n(r,d),r[e].remove(d)};m("prev","next",(function(t,e){return _(t,e)})),m("next","prev",(function(t,e){return _(e,t)}))}}return console.assert(0===v.size),g}function y(t,e){return v(t,e,p,1e-6)}function _(t,e){return v(t,e,d,1e-6)}function m(t){return g(t,p,1e-6)}function w(t){return g(t,d,1e-6)}e.generateXConstraints=y,e.generateYConstraints=_,e.generateXGroupConstraints=m,e.generateYGroupConstraints=w,e.removeOverlaps=function(t){var e=t.map((function(t){return new o.Variable(t.cx())})),n=y(t,e),r=new o.Solver(e,n);r.solve(),e.forEach((function(e,n){return t[n].setXCentre(e.position())})),e=t.map((function(t){return new o.Variable(t.cy())})),n=_(t,e),(r=new o.Solver(e,n)).solve(),e.forEach((function(e,n){return t[n].setYCentre(e.position())}))};var b=function(t){function e(e,n){var r=t.call(this,0,n)||this;return r.index=e,r}return i(e,t),e}(o.Variable);e.IndexedVariable=b;var x=function(){function t(t,e,n,r,i){var o=this;if(void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=!1),this.nodes=t,this.groups=e,this.rootGroup=n,this.avoidOverlaps=i,this.variables=t.map((function(t,e){return t.variable=new b(e,1)})),r&&this.createConstraints(r),i&&n&&void 0!==n.groups){t.forEach((function(t){if(t.width&&t.height){var e=t.width/2,n=t.height/2;t.bounds=new u(t.x-e,t.x+e,t.y-n,t.y+n)}else t.bounds=new u(t.x,t.x,t.y,t.y)})),a(n);var s=t.length;e.forEach((function(t){o.variables[s]=t.minVar=new b(s++,void 0!==t.stiffness?t.stiffness:.01),o.variables[s]=t.maxVar=new b(s++,void 0!==t.stiffness?t.stiffness:.01)}))}}return t.prototype.createSeparation=function(t){return new o.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map((function(t){return e.nodes[t.node]})).sort((function(t,e){return t[n]-e[n]})),o=null;i.forEach((function(t){if(o){var e=o[n]+o[r];e>t[n]&&(t[n]=e)}o=t}))}},t.prototype.createAlignment=function(t){var e=this,n=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var r="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach((function(t){var i=e.nodes[t.node].variable;r.push(new o.Constraint(n,i,t.offset,!0))}))},t.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter((function(t){return"x"===t.axis&&n(t)})).map((function(t){return e.createSeparation(t)})),this.yConstraints=t.filter((function(t){return"y"===t.axis&&n(t)})).map((function(t){return e.createSeparation(t)})),t.filter((function(t){return"alignment"===t.type})).forEach((function(t){return e.createAlignment(t)}))},t.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach((function(i,o){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[o]=r(i)):i.variable.weight=1;var s=(i.width||0)/2,a=(i.height||0)/2,h=t[o],c=e[o];i.bounds=new u(h-s,h+s,c-a,c+a)}))},t.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,(function(t){return t.px}),this.xConstraints,m,(function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())}),(function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i}))},t.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,(function(t){return t.py}),this.yConstraints,w,(function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())}),(function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i}))},t.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},t.prototype.project=function(t,e,n,r,i,o,s,u,h){this.setupVariablesAndBounds(t,e,r,i),this.rootGroup&&this.avoidOverlaps&&(a(this.rootGroup),o=o.concat(s(this.rootGroup))),this.solve(this.variables,o,n,r),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(h),a(this.rootGroup))},t.prototype.solve=function(t,e,n,r){var i=new o.Solver(t,e);i.setStartingPositions(n),i.setDesiredPositions(r),i.solve()},t}();e.Projection=x},867:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(421),i=function(t,e){this.id=t,this.distance=e},o=function(t){this.id=t,this.neighbours=[]},s=function(t,e,n){this.node=t,this.prev=e,this.d=n},a=function(){function t(t,e,n,r,s){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var a=this.n;a--;)this.neighbours[a]=new o(a);for(a=this.es.length;a--;){var u=this.es[a],h=n(u),c=r(u),l=s(u);this.neighbours[h].neighbours.push(new i(c,l)),this.neighbours[c].neighbours.push(new i(h,l))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new r.PriorityQueue((function(t,e){return t.d<=e.d})),o=this.neighbours[t],a=new s(o,null,0),u={};for(i.push(a);!i.empty()&&(o=(a=i.pop()).node).id!==e;)for(var h=o.neighbours.length;h--;){var c=o.neighbours[h],l=this.neighbours[c.id];if(!a.prev||l.id!==a.prev.node.id){var f=l.id+","+o.id;if(!(f in u&&u[f]<=a.d)){var p=a.prev?n(a.prev.node.id,o.id,l.id):0,d=a.d+c.distance+p;u[f]=d,i.push(new s(l,a,d))}}}for(var g=[];a.prev;)a=a.prev,g.push(a.node.id);return g},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new r.PriorityQueue((function(t,e){return t.d<=e.d})),i=this.neighbours.length,o=new Array(i);i--;){var s=this.neighbours[i];s.d=i===t?0:Number.POSITIVE_INFINITY,s.q=n.push(s)}for(;!n.empty();){var a=n.pop();if(o[a.id]=a.d,a.id===e){for(var u=[],h=a;void 0!==h.prev;)u.push(h.prev.id),h=h.prev;return u}for(i=a.neighbours.length;i--;){var c=a.neighbours[i],l=(h=this.neighbours[c.id],a.d+c.distance);a.d!==Number.MAX_VALUE&&h.d>l&&(h.d=l,h.prev=a,n.reduceKey(h.q,h,(function(t,e){return t.q=e})))}}return o},t}();e.Calculator=a},926:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.offset/t.scale,r=t.weight;this.AB+=r*e*n,this.AD+=r*e*t.desiredPosition,this.A2+=r*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();e.PositionStats=n;var r=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();e.Constraint=r;var i=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach((function(t){return n(t,t.right)})),this.cIn.forEach((function(t){return n(t,t.left)}))},t}();e.Variable=i;var o=function(){function t(t){this.vars=[],t.offset=0,this.ps=new n(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,(function(e,o){var s=r.compute_lm(o,t,n);o===e.right?(i+=s*e.left.scale,e.lm=s):(i+=s*e.right.scale,e.lm=-s),n(e)})),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,(function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)}))},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,(function(r,o){e.push(t(r)),i.traverse(t,e,o,n)}))},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,(function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)})),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,(function(){}));var n=null;return this.findPath(t,null,e,(function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)})),n},t.prototype.findPath=function(t,e,n,r){var i=this,o=!1;return t.visitNeighbours(e,(function(e,s){o||s!==n&&!i.findPath(s,t,n,r)||(o=!0,r(e,s))})),o},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var o=t.vars[r];o.offset+=n,this.addVariable(o)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();e.Block=o;var s=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new o(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach((function(t){return t.updateWeightedPosition()}))},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach((function(n){var r=n.findMinLM();null!==r&&r.lm<a.LAGRANGIAN_TOLERANCE&&(n=r.left.block,o.split(r).forEach((function(t){return e.insert(t)})),e.remove(n),t.push(r))}))},t}();e.Blocks=s;var a=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach((function(t){t.cIn=[],t.cOut=[]})),this.cs=e,e.forEach((function(t){t.left.cOut.push(t),t.right.cIn.push(t)})),this.inactive=e.map((function(t){return t.active=!1,t})),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map((function(t){return t.active=!1,t})),this.bs=new s(this.vs),this.bs.forEach((function(e,n){return e.posn=t[n]}))},t.prototype.setDesiredPositions=function(t){this.vs.forEach((function(e,n){return e.desiredPosition=t[n]}))},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,o=i,s=0;s<i;++s){var a=r[s];if(!a.unsatisfiable){var u=a.slack();if((a.equality||u<e)&&(e=u,n=a,o=s,a.equality))break}}return o!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[o]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new s(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();e.Solver=a,e.removeOverlapInOneDimension=function(t,e,n){for(var o=t.map((function(t){return new i(t.desiredCenter)})),s=[],u=t.length,h=0;h<u-1;h++){var c=t[h],l=t[h+1];s.push(new r(o[h],o[h+1],(c.size+l.size)/2))}var f=o[0],p=o[u-1],d=t[0].size/2,g=t[u-1].size/2,v=null,y=null;return e&&(v=new i(e,1e3*f.weight),o.push(v),s.push(new r(v,f,d))),n&&(y=new i(n,1e3*p.weight),o.push(y),s.push(new r(p,y,g))),new a(o,s).solve(),{newCenters:o.slice(0,t.length).map((function(t){return t.position()})),lowerBound:v?v.position():f.position()-d,upperBound:y?y.position():p.position()+g}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.d(r,{default:()=>Lr});var t={};function e(){}function i(t){return null==t?e:function(){return this.querySelector(t)}}function o(){return[]}function s(t){return null==t?o:function(){return this.querySelectorAll(t)}}function a(t){return function(){return this.matches(t)}}function u(t){return function(e){return e.matches(t)}}n.r(t),n(308);var h=Array.prototype.find;function c(){return this.firstElementChild}var l=Array.prototype.filter;function f(){return Array.from(this.children)}function p(t){return new Array(t.length)}function d(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function g(t,e,n,r,i,o){for(var s,a=0,u=e.length,h=o.length;a<h;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new d(t,o[a]);for(;a<u;++a)(s=e[a])&&(i[a]=s)}function v(t,e,n,r,i,o,s){var a,u,h,c=new Map,l=e.length,f=o.length,p=new Array(l);for(a=0;a<l;++a)(u=e[a])&&(p[a]=h=s.call(u,u.__data__,a,e)+"",c.has(h)?i[a]=u:c.set(h,u));for(a=0;a<f;++a)h=s.call(t,o[a],a,o)+"",(u=c.get(h))?(r[a]=u,u.__data__=o[a],c.delete(h)):n[a]=new d(t,o[a]);for(a=0;a<l;++a)(u=e[a])&&c.get(p[a])===u&&(i[a]=u)}function y(t){return t.__data__}function _(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function m(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}d.prototype={constructor:d,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var w="http://www.w3.org/1999/xhtml";const b={svg:"http://www.w3.org/2000/svg",xhtml:w,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function x(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),b.hasOwnProperty(e)?{space:b[e],local:t}:t}function k(t){return function(){this.removeAttribute(t)}}function E(t){return function(){this.removeAttributeNS(t.space,t.local)}}function A(t,e){return function(){this.setAttribute(t,e)}}function S(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function M(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function P(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function O(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function N(t){return function(){this.style.removeProperty(t)}}function L(t,e,n){return function(){this.style.setProperty(t,e,n)}}function T(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function j(t,e){return t.style.getPropertyValue(e)||O(t).getComputedStyle(t,null).getPropertyValue(e)}function C(t){return function(){delete this[t]}}function I(t,e){return function(){this[t]=e}}function D(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function G(t){return t.trim().split(/^|\s+/)}function $(t){return t.classList||new V(t)}function V(t){this._node=t,this._names=G(t.getAttribute("class")||"")}function B(t,e){for(var n=$(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function X(t,e){for(var n=$(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function z(t){return function(){B(this,t)}}function q(t){return function(){X(this,t)}}function R(t,e){return function(){(e.apply(this,arguments)?B:X)(this,t)}}function F(){this.textContent=""}function Y(t){return function(){this.textContent=t}}function H(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function U(){this.innerHTML=""}function W(t){return function(){this.innerHTML=t}}function K(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Z(){this.nextSibling&&this.parentNode.appendChild(this)}function Q(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function J(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===w&&e.documentElement.namespaceURI===w?e.createElement(t):e.createElementNS(n,t)}}function tt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function et(t){var e=x(t);return(e.local?tt:J)(e)}function nt(){return null}function rt(){var t=this.parentNode;t&&t.removeChild(this)}function it(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ot(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function st(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function at(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ut(t,e,n){var r=O(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ht(t,e){return function(){return ut(this,t,e)}}function ct(t,e){return function(){return ut(this,t,e.apply(this,arguments))}}V.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var lt=[null];function ft(t,e){this._groups=t,this._parents=e}function pt(){return new ft([[document.documentElement]],lt)}ft.prototype=pt.prototype={constructor:ft,select:function(t){"function"!=typeof t&&(t=i(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var s,a,u=e[o],h=u.length,c=r[o]=new Array(h),l=0;l<h;++l)(s=u[l])&&(a=t.call(s,s.__data__,l,u))&&("__data__"in s&&(a.__data__=s.__data__),c[l]=a);return new ft(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}(t):s(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,u=e[o],h=u.length,c=0;c<h;++c)(a=u[c])&&(r.push(t.call(a,a.__data__,c,u)),i.push(a));return new ft(r,i)},selectChild:function(t){return this.select(null==t?c:function(t){return function(){return h.call(this.children,t)}}("function"==typeof t?t:u(t)))},selectChildren:function(t){return this.selectAll(null==t?f:function(t){return function(){return l.call(this.children,t)}}("function"==typeof t?t:u(t)))},filter:function(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],u=s.length,h=r[i]=[],c=0;c<u;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&h.push(o);return new ft(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,y);var n,r=e?v:g,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=o.length,a=new Array(s),u=new Array(s),h=new Array(s),c=0;c<s;++c){var l=i[c],f=o[c],p=f.length,d=_(t.call(l,l&&l.__data__,c,i)),m=d.length,w=u[c]=new Array(m),b=a[c]=new Array(m);r(l,f,w,b,h[c]=new Array(p),d,e);for(var x,k,E=0,A=0;E<m;++E)if(x=w[E]){for(E>=A&&(A=E+1);!(k=b[A])&&++A<m;);x._next=k||null}}return(a=new ft(a,i))._enter=u,a._exit=h,a},enter:function(){return new ft(this._enter||this._groups.map(p),this._parents)},exit:function(){return new ft(this._exit||this._groups.map(p),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var h,c=n[u],l=r[u],f=c.length,p=a[u]=new Array(f),d=0;d<f;++d)(h=c[d]||l[d])&&(p[d]=h);for(;u<i;++u)a[u]=n[u];return new ft(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=m);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],u=a.length,h=i[o]=new Array(u),c=0;c<u;++c)(s=a[c])&&(h[c]=s);h.sort(e)}return new ft(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=x(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?E:k:"function"==typeof e?n.local?P:M:n.local?S:A)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?N:"function"==typeof e?T:L)(t,e,null==n?"":n)):j(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?C:"function"==typeof e?D:I)(t,e)):this.node()[t]},classed:function(t,e){var n=G(t+"");if(arguments.length<2){for(var r=$(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?R:e?z:q)(n,e))},text:function(t){return arguments.length?this.each(null==t?F:("function"==typeof t?H:Y)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?U:("function"==typeof t?K:W)(t)):this.node().innerHTML},raise:function(){return this.each(Z)},lower:function(){return this.each(Q)},append:function(t){var e="function"==typeof t?t:et(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:et(t),r=null==e?nt:"function"==typeof e?e:i(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(rt)},clone:function(t){return this.select(t?ot:it)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?at:st,r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var u,h=0,c=a.length;h<c;++h)for(r=0,u=a[h];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?ct:ht)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};const dt=pt;var gt={value:()=>{}};function vt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new yt(r)}function yt(t){this._=t}function _t(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function mt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=gt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}yt.prototype=vt.prototype={constructor:yt,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=o[s]).type)i[n]=mt(i[n],t.name,e);else if(null==e)for(n in i)i[n]=mt(i[n],t.name,null);return this}for(;++s<a;)if((n=(t=o[s]).type)&&(n=_t(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new yt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const wt=vt;var bt,xt,kt=0,Et=0,At=0,St=1e3,Mt=0,Pt=0,Ot=0,Nt="object"==typeof performance&&performance.now?performance:Date,Lt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Tt(){return Pt||(Lt(jt),Pt=Nt.now()+Ot)}function jt(){Pt=0}function Ct(){this._call=this._time=this._next=null}function It(t,e,n){var r=new Ct;return r.restart(t,e,n),r}function Dt(){Pt=(Mt=Nt.now())+Ot,kt=Et=0;try{!function(){Tt(),++kt;for(var t,e=bt;e;)(t=Pt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--kt}()}finally{kt=0,function(){for(var t,e,n=bt,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:bt=e);xt=t,$t(r)}(),Pt=0}}function Gt(){var t=Nt.now(),e=t-Mt;e>St&&(Ot-=e,Mt=t)}function $t(t){kt||(Et&&(Et=clearTimeout(Et)),t-Pt>24?(t<1/0&&(Et=setTimeout(Dt,t-Nt.now()-Ot)),At&&(At=clearInterval(At))):(At||(Mt=Nt.now(),At=setInterval(Gt,St)),kt=1,Lt(Dt)))}function Vt(t,e,n){var r=new Ct;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Ct.prototype=It.prototype={constructor:Ct,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Tt():+n)+(null==e?0:+e),this._next||xt===this||(xt?xt._next=this:bt=this,xt=this),this._call=t,this._time=n,$t()},stop:function(){this._call&&(this._call=null,this._time=1/0,$t())}};var Bt=wt("start","end","cancel","interrupt"),Xt=[],zt=0,qt=3;function Rt(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var h,c,l,f;if(1!==n.state)return a();for(h in i)if((f=i[h]).name===n.name){if(f.state===qt)return Vt(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[h]):+h<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[h])}if(Vt((function(){n.state===qt&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=qt,r=new Array(l=n.tween.length),h=0,c=-1;h<l;++h)(f=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=It((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:Bt,tween:Xt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:zt})}function Ft(t,e){var n=Ht(t,e);if(n.state>zt)throw new Error("too late; already scheduled");return n}function Yt(t,e){var n=Ht(t,e);if(n.state>qt)throw new Error("too late; already running");return n}function Ht(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ut(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Wt,Kt=180/Math.PI,Zt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qt(t,e,n,r,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Kt,skewX:Math.atan(u)*Kt,scaleX:s,scaleY:a}}function Jt(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],u=[];return o=t(o),s=t(s),function(t,r,i,o,s,a){if(t!==i||r!==o){var u=s.push("translate(",null,e,null,n);a.push({i:u-4,x:Ut(t,i)},{i:u-2,x:Ut(r,o)})}else(i||o)&&s.push("translate("+i+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Ut(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,s.rotate,a,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Ut(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,s.skewX,a,u),function(t,e,n,r,o,s){if(t!==n||e!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Ut(t,n)},{i:a-2,x:Ut(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,u),o=s=null,function(t){for(var e,n=-1,r=u.length;++n<r;)a[(e=u[n]).i]=e.x(t);return a.join("")}}}var te=Jt((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Zt:Qt(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),ee=Jt((function(t){return null==t?Zt:(Wt||(Wt=document.createElementNS("http://www.w3.org/2000/svg","g")),Wt.setAttribute("transform",t),(t=Wt.transform.baseVal.consolidate())?Qt((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Zt)}),", ",")",")");function ne(t,e){var n,r;return function(){var i=Yt(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function re(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Yt(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,h=i.length;u<h;++u)if(i[u].name===e){i[u]=a;break}u===h&&i.push(a)}o.tween=i}}function ie(t,e,n){var r=t._id;return t.each((function(){var t=Yt(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Ht(t,r).value[e]}}function oe(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function se(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ae(){}var ue=.7,he=1/ue,ce="\\s*([+-]?\\d+)\\s*",le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pe=/^#([0-9a-f]{3,8})$/,de=new RegExp(`^rgb\\(${ce},${ce},${ce}\\)$`),ge=new RegExp(`^rgb\\(${fe},${fe},${fe}\\)$`),ve=new RegExp(`^rgba\\(${ce},${ce},${ce},${le}\\)$`),ye=new RegExp(`^rgba\\(${fe},${fe},${fe},${le}\\)$`),_e=new RegExp(`^hsl\\(${le},${fe},${fe}\\)$`),me=new RegExp(`^hsla\\(${le},${fe},${fe},${le}\\)$`),we={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function be(){return this.rgb().formatHex()}function xe(){return this.rgb().formatRgb()}function ke(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ee(e):3===n?new Me(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ae(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ae(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=de.exec(t))?new Me(e[1],e[2],e[3],1):(e=ge.exec(t))?new Me(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ve.exec(t))?Ae(e[1],e[2],e[3],e[4]):(e=ye.exec(t))?Ae(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=_e.exec(t))?je(e[1],e[2]/100,e[3]/100,1):(e=me.exec(t))?je(e[1],e[2]/100,e[3]/100,e[4]):we.hasOwnProperty(t)?Ee(we[t]):"transparent"===t?new Me(NaN,NaN,NaN,0):null}function Ee(t){return new Me(t>>16&255,t>>8&255,255&t,1)}function Ae(t,e,n,r){return r<=0&&(t=e=n=NaN),new Me(t,e,n,r)}function Se(t,e,n,r){return 1===arguments.length?((i=t)instanceof ae||(i=ke(i)),i?new Me((i=i.rgb()).r,i.g,i.b,i.opacity):new Me):new Me(t,e,n,null==r?1:r);var i}function Me(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Pe(){return`#${Te(this.r)}${Te(this.g)}${Te(this.b)}`}function Oe(){const t=Ne(this.opacity);return`${1===t?"rgb(":"rgba("}${Le(this.r)}, ${Le(this.g)}, ${Le(this.b)}${1===t?")":`, ${t})`}`}function Ne(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Le(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Te(t){return((t=Le(t))<16?"0":"")+t.toString(16)}function je(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ie(t,e,n,r)}function Ce(t){if(t instanceof Ie)return new Ie(t.h,t.s,t.l,t.opacity);if(t instanceof ae||(t=ke(t)),!t)return new Ie;if(t instanceof Ie)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Ie(s,a,u,t.opacity)}function Ie(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function De(t){return(t=(t||0)%360)<0?t+360:t}function Ge(t){return Math.max(0,Math.min(1,t||0))}function $e(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ve(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}oe(ae,ke,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:be,formatHex:be,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ce(this).formatHsl()},formatRgb:xe,toString:xe}),oe(Me,Se,se(ae,{brighter(t){return t=null==t?he:Math.pow(he,t),new Me(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ue:Math.pow(ue,t),new Me(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Me(Le(this.r),Le(this.g),Le(this.b),Ne(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pe,formatHex:Pe,formatHex8:function(){return`#${Te(this.r)}${Te(this.g)}${Te(this.b)}${Te(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Oe,toString:Oe})),oe(Ie,(function(t,e,n,r){return 1===arguments.length?Ce(t):new Ie(t,e,n,null==r?1:r)}),se(ae,{brighter(t){return t=null==t?he:Math.pow(he,t),new Ie(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ue:Math.pow(ue,t),new Ie(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Me($e(t>=240?t-240:t+120,i,r),$e(t,i,r),$e(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ie(De(this.h),Ge(this.s),Ge(this.l),Ne(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ne(this.opacity);return`${1===t?"hsl(":"hsla("}${De(this.h)}, ${100*Ge(this.s)}%, ${100*Ge(this.l)}%${1===t?")":`, ${t})`}`}}));const Be=t=>()=>t;function Xe(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Be(isNaN(t)?e:t)}const ze=function t(e){var n=function(t){return 1==(t=+t)?Xe:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Be(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Se(t)).r,(e=Se(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=Xe(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function qe(t){return function(e){var n,r,i=e.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=Se(e[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=t(o),s=t(s),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=a(t),r+""}}}qe((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],s=r>0?t[r-1]:2*i-o,a=r<e-1?t[r+2]:2*o-i;return Ve((n-r/e)*e,s,i,o,a)}})),qe((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],a=t[(r+2)%e];return Ve((n-r/e)*e,i,o,s,a)}}));var Re=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fe=new RegExp(Re.source,"g");function Ye(t,e){var n,r,i,o=Re.lastIndex=Fe.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=Re.exec(t))&&(r=Fe.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:Ut(n,r)})),o=Fe.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}function He(t,e){var n;return("number"==typeof e?Ut:e instanceof ke?ze:(n=ke(e))?(e=n,ze):Ye)(t,e)}function Ue(t){return function(){this.removeAttribute(t)}}function We(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ke(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function Ze(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function Qe(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttribute(t))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttribute(t)}}function Je(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttributeNS(t.space,t.local))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttributeNS(t.space,t.local)}}function tn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function en(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function nn(t,e){return function(){Ft(this,t).delay=+e.apply(this,arguments)}}function rn(t,e){return e=+e,function(){Ft(this,t).delay=e}}function on(t,e){return function(){Yt(this,t).duration=+e.apply(this,arguments)}}function sn(t,e){return e=+e,function(){Yt(this,t).duration=e}}var an=dt.prototype.constructor;function un(t){return function(){this.style.removeProperty(t)}}var hn=0;function cn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ln(){return++hn}var fn=dt.prototype;cn.prototype=function(t){return dt().transition(t)}.prototype={constructor:cn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=i(t));for(var r=this._groups,o=r.length,s=new Array(o),a=0;a<o;++a)for(var u,h,c=r[a],l=c.length,f=s[a]=new Array(l),p=0;p<l;++p)(u=c[p])&&(h=t.call(u,u.__data__,p,c))&&("__data__"in u&&(h.__data__=u.__data__),f[p]=h,Rt(f[p],e,n,p,f,Ht(u,n)));return new cn(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=s(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var h,c=r[u],l=c.length,f=0;f<l;++f)if(h=c[f]){for(var p,d=t.call(h,h.__data__,f,c),g=Ht(h,n),v=0,y=d.length;v<y;++v)(p=d[v])&&Rt(p,e,n,v,d,g);o.push(d),a.push(h)}return new cn(o,a,e,n)},selectChild:fn.selectChild,selectChildren:fn.selectChildren,filter:function(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],u=s.length,h=r[i]=[],c=0;c<u;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&h.push(o);return new cn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u,h=e[a],c=n[a],l=h.length,f=s[a]=new Array(l),p=0;p<l;++p)(u=h[p]||c[p])&&(f[p]=u);for(;a<r;++a)s[a]=e[a];return new cn(s,this._parents,this._name,this._id)},selection:function(){return new an(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ln(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,h=0;h<u;++h)if(s=a[h]){var c=Ht(s,e);Rt(s,t,n,h,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new cn(r,this._parents,t,n)},call:fn.call,nodes:fn.nodes,node:fn.node,size:fn.size,empty:fn.empty,each:fn.each,on:function(t,e){var n=this._id;return arguments.length<2?Ht(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Ft:Yt;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}(n,t,e))},attr:function(t,e){var n=x(t),r="transform"===n?ee:He;return this.attrTween(t,"function"==typeof e?(n.local?Je:Qe)(n,r,ie(this,"attr."+t,e)):null==e?(n.local?We:Ue)(n):(n.local?Ze:Ke)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=x(t);return this.tween(n,(r.local?tn:en)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?te:He;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=j(this,t),s=(this.style.removeProperty(t),j(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,un(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var s=j(this,t),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(t),u=a=j(this,t)),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}(t,r,ie(this,"style."+t,e))).each(function(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var u=Yt(this,t),h=u.on,c=null==u.value[s]?o||(o=un(e)):void 0;h===n&&i===c||(r=(n=h).copy()).on(a,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var s=j(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ie(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Ht(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?ne:re)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?nn:rn)(e,t)):Ht(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?on:sn)(e,t)):Ht(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Yt(this,t).ease=e}}(e,t)):Ht(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Yt(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},u={value:function(){0==--i&&o()}};n.each((function(){var n=Yt(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:fn[Symbol.iterator]};var pn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function dn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function gn(t){return"string"==typeof t?new ft([[document.querySelector(t)]],[document.documentElement]):new ft([[t]],lt)}dt.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition}}(this,t)}))},dt.prototype.transition=function(t){var e,n;t instanceof cn?(e=t._id,t=t._name):(e=ln(),(n=pn).time=Tt(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,h=0;h<u;++h)(s=a[h])&&Rt(s,t,e,h,a,n||dn(s,e));return new cn(r,this._parents,t,e)};var vn=n(470),yn=n.n(vn),_n=n(533),mn=n.n(_n)()(1);function wn(){var t=mn();return String.fromCharCode(Math.floor(26*t)+97)+t.toString(16).substr(2)}function bn(t){var e="";return"translate"in t&&(e+=" translate(".concat(t.translate.x,", ").concat(t.translate.y,")")),"rotate"in t&&(e+=" rotate(".concat(t.rotate,")")),"scale"in t&&(e+=" scale(".concat(t.scale,")")),e}var xn=function(t){return"greuler-"+t};class kn extends Map{constructor(t,e=An){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(En(this,t))}has(t){return super.has(En(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}(this,t))}}function En({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function An(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Sn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const Mn=Symbol("implicit");var Pn=function t(){var e=new kn,n=[],r=[],i=Mn;function o(t){let o=e.get(t);if(void 0===o){if(i!==Mn)return i;e.set(t,o=n.push(t)-1)}return r[o%r.length]}return o.domain=function(t){if(!arguments.length)return n.slice();n=[],e=new kn;for(const r of t)e.has(r)||e.set(r,n.push(r)-1);return o},o.range=function(t){return arguments.length?(r=Array.from(t),o):r.slice()},o.unknown=function(t){return arguments.length?(i=t,o):i},o.copy=function(){return t(n,r).unknown(i)},Sn.apply(o,arguments),o}(function(t){for(var e=new Array(10),n=0;n<10;)e[n]="#"+t.slice(6*n,6*++n);return e}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")),On={};function Nn(t){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nn(t)}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tn(r.key),r)}}function Tn(t){var e=function(t,e){if("object"!=Nn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nn(e)?e:String(e)}["BLUE","ORANGE","GREEN","RED","PURPLE","BROWN","PINK","GRAY","YELLOW","CYAN"].forEach((function(t,e){On[t]=Pn.range()[2*e],On["LIGHT_"+t]=Pn.range()[2*e+1]})),On.randomFromPalette=function(){return Pn.range()[Math.floor(10*Math.random())]},On.DEFAULT_NODE="#2980B9",On.DEFAULT_EDGE="#CCCCCC";var jn={r:10,fill:On.DEFAULT_NODE},Cn={stroke:On.DEFAULT_EDGE};function In(t,e){for(var n=0;n<t.length;n+=1)if(t[n].id===e)return!0}var Dn=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.owner=e,this.nodes=n.nodes,this.edges=n.edges}var e,n,r;return e=t,n=[{key:"addNode",value:function(){for(var e=0;e<arguments.length;e+=1){var n=arguments[e];if(!n.hasOwnProperty("id"))throw Error("the object must have the property `id`");if(this.getNode(n))throw Error("node already in store");this.nodes.push(t.appendNodeDefaults.call(this.owner,n))}}},{key:"getNode",value:function(t){return this.getNodesByFn((function(e){return e.id===t.id}))[0]}},{key:"getNodesByFn",value:function(t){return this.nodes.filter(t)}},{key:"getAdjacentNodes",value:function(t){for(var e,n=[],r={},i=0;i<this.edges.length;i+=1){var o=this.edges[i];e=null,o.source.id===t.id?e=o.target:o.target.id===t.id&&(e=o.source),e&&!r[e.id]&&(r[e.id]=!0,n.push(e))}return n}},{key:"getSuccessorNodes",value:function(t){for(var e,n=[],r={},i=0;i<this.edges.length;i+=1){var o=this.edges[i];e=null,o.source.id===t.id&&(e=o.target),e&&!r[e.id]&&(r[e.id]=!0,n.push(e))}return n}},{key:"getPredecessorNodes",value:function(t){for(var e,n=[],r={},i=0;i<this.edges.length;i+=1){var o=this.edges[i];e=null,o.target.id===t.id&&(e=o.source),e&&!r[e.id]&&(r[e.id]=!0,n.push(e))}return n}},{key:"removeNode",value:function(t){this.removeNodesByFn((function(e){return e.id===t.id}))}},{key:"removeNodes",value:function(t){this.removeNodesByFn((function(e){return In(t,e.id)}))}},{key:"removeNodesByFn",value:function(t){var e;for(e=0;e<this.nodes.length;e+=1)if(t(this.nodes[e],e)){var n=this.nodes.splice(e,1);this.removeEdges(this.getIncidentEdges(n[0])),e-=1}}},{key:"addEdge",value:function(){for(var e=0;e<arguments.length;e+=1){var n=arguments[e];if(!n.hasOwnProperty("source")||!n.hasOwnProperty("target"))throw Error("the edge must have the properties `source` and `target`");var r=n.source,i=n.target;if("object"!==Nn(r)&&(r=this.getNode({id:n.source})),"object"!==Nn(i)&&(i=this.getNode({id:n.target})),!r||!i)throw Error("new edge does not join existing vertices");n.source=r,n.target=i,this.edges.push(t.appendEdgeDefaults.call(this.owner,n))}}},{key:"getEdge",value:function(t){return this.getEdgesByFn((function(e){return e.id===t.id}))[0]}},{key:"getEdgesBetween",value:function(t){return this.getEdgesByFn((function(e){return e.source.id===t.source&&e.target.id===t.target}))}},{key:"getAllEdgesBetween",value:function(t){return this.getEdgesByFn((function(e){return e.source.id===t.source&&e.target.id===t.target||e.source.id===t.target&&e.target.id===t.source}))}},{key:"removeEdge",value:function(t){this.removeEdgesByFn((function(e){return e.id===t.id}))}},{key:"removeEdges",value:function(t){this.removeEdgesByFn((function(e){return In(t,e.id)}))}},{key:"removeEdgesByFn",value:function(t){var e;for(e=0;e<this.edges.length;e+=1)t(this.edges[e],e)&&(this.edges.splice(e,1),e-=1)}},{key:"getEdgesByFn",value:function(t){return this.edges.filter(t)}},{key:"getOutgoingEdges",value:function(t){return this.getEdgesByFn((function(e){return e.source.id===t.id}))}},{key:"getIncomingEdges",value:function(t){return this.getEdgesByFn((function(e){return e.target.id===t.id}))}},{key:"getIncidentEdges",value:function(t){return this.getOutgoingEdges(t).concat(this.getIncomingEdges(t))}},{key:"add",value:function(){for(var t=0;t<arguments.length;t+=1){var e=arguments[t];e.hasOwnProperty("source")&&e.hasOwnProperty("target")?this.addEdge(e):this.addNode(e)}}}],r=[{key:"appendNodeDefaults",value:function(t){return t.hasOwnProperty("id")||(t.id=wn()),(t=yn()({},jn,this.options.nodeDefaults,t)).hasOwnProperty("width")||(t.width=2*t.r),t.hasOwnProperty("height")||(t.height=2*t.r),t}},{key:"appendEdgeDefaults",value:function(t){return t.hasOwnProperty("id")||(t.id=wn()),yn()({},Cn,this.options.edgeDefaults,t)}},{key:"random",value:function(t){var e,n,r;t=yn()({order:10,size:15,connected:!1,multiGraph:!1,pseudoGraph:!1},t);var i=[],o=[];for(e=0;e<t.order;e+=1)o[e]=[],i.push({id:e});function s(t,e){o[t][e]=o[e][t]=!0}var a=[];if(e=0,t.connected){for(e=1;e<t.order;e+=1)s(e,r=Math.floor(Math.random()*e)),a.push({source:e,target:r});e-=1}for(;e<t.size;e+=1)(n=Math.floor(Math.random()*t.order))!==(r=Math.floor(Math.random()*t.order))||t.pseudoGraph?o[n][r]&&!t.multiGraph?e-=1:(s(n,r),a.push({source:n,target:r})):e-=1;return{nodes:i,links:a}}}],n&&Ln(e.prototype,n),r&&Ln(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Gn(t){return null==t?[]:Array.isArray(t)?t:"string"==typeof t?[t]:"function"==typeof t[Symbol.iterator]?[...t]:[t]}var $n=n(19);function Vn(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Bn={passive:!1},Xn={capture:!0,passive:!1};function zn(t){t.stopImmediatePropagation()}function qn(t){t.preventDefault(),t.stopImmediatePropagation()}const Rn=t=>()=>t;function Fn(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:u,dy:h,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:c}})}function Yn(t){return!t.ctrlKey&&!t.button}function Hn(){return this.parentNode}function Un(t,e){return null==e?{x:t.x,y:t.y}:e}function Wn(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kn(){var t,e,n,r,i=Yn,o=Hn,s=Un,a=Wn,u={},h=wt("start","drag","end"),c=0,l=0;function f(t){t.on("mousedown.drag",p).filter(a).on("touchstart.drag",v).on("touchmove.drag",y,Bn).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(s,a){if(!r&&i.call(this,s,a)){var u=m(this,o.call(this,s,a),s,a,"mouse");u&&(gn(s.view).on("mousemove.drag",d,Xn).on("mouseup.drag",g,Xn),function(t){var e=t.document.documentElement,n=gn(t).on("dragstart.drag",qn,Xn);"onselectstart"in e?n.on("selectstart.drag",qn,Xn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(s.view),zn(s),n=!1,t=s.clientX,e=s.clientY,u("start",s))}}function d(r){if(qn(r),!n){var i=r.clientX-t,o=r.clientY-e;n=i*i+o*o>l}u.mouse("drag",r)}function g(t){gn(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,r=gn(t).on("dragstart.drag",null);e&&(r.on("click.drag",qn,Xn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,n),qn(t),u.mouse("end",t)}function v(t,e){if(i.call(this,t,e)){var n,r,s=t.changedTouches,a=o.call(this,t,e),u=s.length;for(n=0;n<u;++n)(r=m(this,a,t,e,s[n].identifier,s[n]))&&(zn(t),r("start",t,s[n]))}}function y(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=u[r[e].identifier])&&(qn(t),n("drag",t,r[e]))}function _(t){var e,n,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<o;++e)(n=u[i[e].identifier])&&(zn(t),n("end",t,i[e]))}function m(t,e,n,r,i,o){var a,l,p,d=h.copy(),g=Vn(o||n,e);if(null!=(p=s.call(t,new Fn("beforestart",{sourceEvent:n,target:f,identifier:i,active:c,x:g[0],y:g[1],dx:0,dy:0,dispatch:d}),r)))return a=p.x-g[0]||0,l=p.y-g[1]||0,function n(o,s,h){var v,y=g;switch(o){case"start":u[i]=n,v=c++;break;case"end":delete u[i],--c;case"drag":g=Vn(h||s,e),v=c}d.call(o,t,new Fn(o,{sourceEvent:s,subject:p,target:f,identifier:i,active:v,x:g[0]+a,y:g[1]+l,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:d}),r)}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:Rn(!!t),f):i},f.container=function(t){return arguments.length?(o="function"==typeof t?t:Rn(t),f):o},f.subject=function(t){return arguments.length?(s="function"==typeof t?t:Rn(t),f):s},f.touchable=function(t){return arguments.length?(a="function"==typeof t?t:Rn(!!t),f):a},f.on=function(){var t=h.on.apply(h,arguments);return t===h?f:t},f.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,f):Math.sqrt(l)},f}function Zn(t){return function(){return t}}function Qn(t){this._context=t}function Jn(t){return new Qn(t)}Fn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},Array.prototype.slice,Qn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const tr=Math.PI,er=2*tr,nr=1e-6,rr=er-nr;function ir(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class or{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?ir:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ir;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,a=n-t,u=r-e,h=o-t,c=s-e,l=h*h+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(l>nr)if(Math.abs(c*a-u*h)>nr&&i){let f=n-o,p=r-s,d=a*a+u*u,g=f*f+p*p,v=Math.sqrt(d),y=Math.sqrt(l),_=i*Math.tan((tr-Math.acos((d+l-g)/(2*v*y)))/2),m=_/y,w=_/v;Math.abs(m-1)>nr&&this._append`L${t+m*h},${e+m*c}`,this._append`A${i},${i},0,0,${+(c*f>h*p)},${this._x1=t+w*a},${this._y1=e+w*u}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(r),a=n*Math.sin(r),u=t+s,h=e+a,c=1^o,l=o?r-i:i-r;null===this._x1?this._append`M${u},${h}`:(Math.abs(this._x1-u)>nr||Math.abs(this._y1-h)>nr)&&this._append`L${u},${h}`,n&&(l<0&&(l=l%er+er),l>rr?this._append`A${n},${n},0,1,${c},${t-s},${e-a}A${n},${n},0,1,${c},${this._x1=u},${this._y1=h}`:l>nr&&this._append`A${n},${n},0,${+(l>=tr)},${c},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function sr(t){return t[0]}function ar(t){return t[1]}function ur(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function hr(t){this._context=t}function cr(t,e){this._basis=new hr(t),this._beta=e}or.prototype,hr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ur(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ur(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},cr.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],s=t[n]-i,a=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*s),this._beta*e[u]+(1-this._beta)*(o+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const lr=function t(e){function n(t){return 1===e?new hr(t):new cr(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function fr(t){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fr(t)}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dr(r.key),r)}}function dr(t){var e=function(t,e){if("object"!=fr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=fr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fr(e)?e:String(e)}var gr=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var e,n;return e=t,n=[{key:"neg",value:function(e){return new t(-e.x,-e.y)}},{key:"len",value:function(e){return Math.sqrt(t.lenSq(e))}},{key:"lenSq",value:function(t){return t.x*t.x+t.y*t.y}},{key:"unit",value:function(e){if(0===e.x&&0===e.y)throw Error("the length of the vector is 0");var n=this.len(e);return new t(e.x/n,e.y/n)}},{key:"orthogonal",value:function(e){return new t(-e.y,e.x)}},{key:"angleDeg",value:function(t){return 180*Math.atan2(t.y,t.x)/Math.PI}},{key:"add",value:function(e,n){return new t(e.x+n.x,e.y+n.y)}},{key:"sub",value:function(e,n){return new t(e.x-n.x,e.y-n.y)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"scale",value:function(e,n){return new t(e.x*n,e.y*n)}},{key:"mid",value:function(e,n){return t.scale(t.add(e,n),.5)}},{key:"angleBetween",value:function(e,n){return Math.acos(t.dot(e,n)/t.len(e)-t.len(n))}},{key:"rotate",value:function(e,n){var r=Math.cos(n),i=Math.sin(n);return new t(e.x*r-e.y*i,e.x*i+e.y*r)}}],null&&pr(e.prototype,null),n&&pr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vr(t){var e=t.owner;function n(t,e){var n=t.r,r=gr.unit(gr.sub(e,t));return gr.add(t,gr.scale(r,n))}function r(t){t.attr("transform",(function(t){var e=gr.angleDeg(t.unit);return bn({translate:t.path[Math.floor(t.path.length/2)],rotate:e})}))}var i=function(t,e){var n=Zn(!0),r=null,i=Jn,o=null,s=function(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new or(e)}(a);function a(a){var u,h,c,l=(a=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(a)).length,f=!1;for(null==r&&(o=i(c=s())),u=0;u<=l;++u)!(u<l&&n(h=a[u],u,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(h,u,a),+e(h,u,a));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?sr:Zn(t),e="function"==typeof e?e:void 0===e?ar:Zn(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:Zn(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:Zn(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:Zn(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}().x((function(t){return t.x})).y((function(t){return t.y})).curve(lr.beta(1));return function(t){var o=t.selectAll("g.edge").data((function(t){return t.edges}),(function(t){return t.id})),s=o.enter().append("g");s.attr("class","edge").attr("id",(function(t){return xn(t.id)})).attr("opacity",1).merge(o).each((function(t){var n=gn(this);n.classed("source-".concat(t.source.id),!0),n.classed("target-".concat(t.target.id),!0),n.classed("directed","directed"in t?t.directed:e.options.directed)}));var a=s.merge(o),u={};a.each((function(t){!function(t,r,i){var o=t.source,s=t.target;if(o.id>s.id){var a=[s,o];o=a[0],s=a[1]}r[o.id]=r[o.id]||{};var u=o,h=s;o.id!==s.id&&(u=n(o,s),h=n(s,o));var c=r[o.id][s.id]=r[o.id][s.id]||{count:1,mid:gr.mid(u,h),direction:-1},l=[];if(o.id===s.id){var f=function(t,n,r){for(var i=e.graph.getAdjacentNodes(t),o=new gr(0,0),s=0;s<i.length;s+=1){var a=i[s];t.id!==a.id&&(o=gr.unit(gr.add(o,gr.unit(gr.sub(t,a)))))}0===o.x&&0===o.y&&(o=gr.unit(new gr(0,-1)));var u=gr.orthogonal(o),h=gr.scale(o,t.r+4),c=25*Math.PI/180,l=c+(r-1)*c,f=gr.add(t,gr.rotate(h,l)),p=gr.add(t,gr.rotate(h,-l)),d=.6*n*(r+1),g=gr.add(t,gr.scale(o,t.r+d)),v=gr.add(f,gr.scale(o,.5*d)),y=gr.add(p,gr.scale(o,.5*d));return{path:[f,gr.add(v,gr.scale(u,d/4)),g,gr.add(y,gr.scale(u,-d/4)),p],dir:u}}(o,i,c.count);l=f.path,t.unit=f.dir}else{var p=gr.unit(gr.sub(s,o));yn()(c,{unit:p,unitOrthogonal:gr.orthogonal(p)}),l.push(gr.add(c.mid,gr.scale(c.unitOrthogonal,Math.floor(c.count/2)*i*c.direction))),t.unit=c.unit}c.count+=1,c.direction*=-1;var d=n(t.source,l[0]),g=n(t.target,l[l.length-1]);t.path=[d].concat(l).concat([g])}(t,u,17)}));var h=a.selectAll("path").data((function(t){return[t,t]})),c=h.enter().append("path").attr("stroke",(function(t){return t.stroke})).attr("fill","transparent").attr("stroke-width",2).each((function(t,e){var n=gn(this);n.attr("opacity",e?0:1),0===e&&n.classed("base",!0),1===e&&(n.attr("stroke-width",5),n.classed("traversal",!0))})).merge(h);c.attr("d",(function(t){return i(t.path)})),c.each((function(t,n){var r=gn(this),i=gn(this.parentNode);0===n&&r.attr("marker-end",i.classed("directed")?"url(#"+e.markerId+")":null)}));var l=a.selectAll("text").data((function(t){return[t]})),f=l.enter().append("text");f.attr("font-size","9px").attr("dominant-baseline","text-after-edge").attr("text-anchor","middle"),f.merge(l).text((function(t){return t.displayWeight})).call(r),l.exit().remove(),o.exit().remove()}}function yr(t){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr(t)}function _r(){_r=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,s=Object.create(o.prototype),a=new N(r||[]);return i(s,"_invoke",{value:S(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",g="completed",v={};function y(){}function _(){}function m(){}var w={};h(w,s,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(L([])));x&&x!==n&&r.call(x,s)&&(w=x);var k=m.prototype=y.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function n(i,o,s,a){var u=l(t[i],t,o);if("throw"!==u.type){var h=u.arg,c=h.value;return c&&"object"==yr(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(c).then((function(t){h.value=t,s(h)}),(function(t){return n("throw",t,s,a)}))}a(u.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=f;return function(o,s){if(i===d)throw new Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:t,done:!0}}for(r.method=o,r.arg=s;;){var a=r.delegate;if(a){var u=M(a,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=d;var h=l(e,n,r);if("normal"===h.type){if(i=r.done?g:p,h.arg===v)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(i=g,r.method="throw",r.arg=h.arg)}}}function M(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=l(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var s=o.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(yr(e)+" is not iterable")}return _.prototype=m,i(k,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:_,configurable:!0}),_.displayName=h(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,h(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},E(A.prototype),h(A.prototype,a,(function(){return this})),e.AsyncIterator=A,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new A(c(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},E(k),h(k,u,"Generator"),h(k,s,(function(){return this})),h(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),h=r.call(s,"finallyLoc");if(u&&h){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function mr(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function wr(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){mr(o,r,i,s,a,"next",t)}function a(t){mr(o,r,i,s,a,"throw",t)}s(void 0)}))}}function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xr(r.key),r)}}function xr(t){var e=function(t,e){if("object"!=yr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yr(e)?e:String(e)}var kr="highlight",Er=function(){function t(e){var n=e.owner,r=e.graph;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.owner=n,this.graph=r}var e,n,r,i;return e=t,n=[{key:"getEdgeStyleOptions",value:function(t){return yn()({duration:this.getAnimationTime(),stroke:"#E74C3C"},t)}},{key:"getNodeStyleOptions",value:function(t){return yn()({duration:this.getAnimationTime()},t)}},{key:"getAnimationTime",value:function(){return this.owner.options.animationTime}},{key:"select",value:function(t){return Array.isArray(t)||(t=[t]),t.length||t.push({id:-1}),this.owner.root.selectAll(t.filter(Boolean).map((function(t){return"#".concat(xn(t.id))})).join(","))}},{key:"innerEdgeSelector",value:function(t){return t.selectAll("path.base")}},{key:"innerNodeSelector",value:function(t){return t.selectAll("circle")}},{key:"getEdges",value:function(){return this.innerEdgeSelector(this.select(this.graph.edges))}},{key:"getNodes",value:function(){return this.innerNodeSelector(this.select(this.graph.nodes))}},{key:"doTemporalHighlightNode",value:function(t,e){return this.innerNodeSelector(t).transition(kr).duration(this.getAnimationTime()/2).attr("r",(function(t){return e.r||1.5*t.r})).transition(kr).duration(this.getAnimationTime()/2).attr("r",(function(t){return t.r})).end()}},{key:"doTemporalHighlightEdges",value:function(t,e){return this.innerEdgeSelector(t).transition(kr).duration(this.getAnimationTime()/2).attr("stroke",e.stroke).transition(kr).duration(this.getAnimationTime()/2).attr("stroke",(function(t){return t.stroke})).end()}},{key:"traverseEdgeWithDirection",value:(i=wr(_r().mark((function t(e,n){var r,i,o=arguments;return _r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:-1,i=e.selectAll("path.traversal"),t.next=4,i.each((function(){var t=gn(this),e=this.getTotalLength();t.attr("stroke",n.stroke).attr("stroke-dasharray","".concat(e," ").concat(e)).attr("stroke-dashoffset",e).attr("opacity",1)})).transition("dasharray").duration(n.duration).attr("stroke-dashoffset",(function(t){var e=2*this.getTotalLength(),i=0;return-1!==r&&t.target.id===r&&(i=e),n.reverse&&(i=e-i),i})).attr("opacity",0).end();case 4:return i.each((function(){gn(this).attr("stroke-dasharray",null).attr("stroke-dashoffset",null).attr("opacity",0)})),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)}))),function(t,e){return i.apply(this,arguments)})},{key:"traverseEdges",value:(r=wr(_r().mark((function t(e,n,r){var i,o;return _r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=yn()({keepStroke:!0,reverse:!1},this.getEdgeStyleOptions(),n),(i=[]).push(this.traverseEdgeWithDirection(e,n,r)),n.keepStroke&&(o=this.innerEdgeSelector(e).transition("update").duration(n.duration).attr("stroke",n.stroke).end(),i.push(o)),t.next=6,Promise.all(i);case 6:return t.abrupt("return",this.innerEdgeSelector(e));case 7:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return r.apply(this,arguments)})},{key:"getNode",value:function(t){return this.innerNodeSelector(this.select(this.graph.getNode(t)))}},{key:"getEdge",value:function(t){return this.innerEdgeSelector(this.select(this.graph.getEdge(t)))}},{key:"highlightNode",value:function(t,e){return this.doTemporalHighlightNode(this.select(this.graph.getNode(t)),this.getNodeStyleOptions(e))}},{key:"highlightEdge",value:function(t,e){return this.doTemporalHighlightEdges(this.select(this.graph.getEdge(t)),this.getEdgeStyleOptions(e))}},{key:"highlightIncidentEdges",value:function(t,e){return this.doTemporalHighlightEdges(this.select(this.graph.getIncidentEdges(t)),this.getEdgeStyleOptions(e))}},{key:"highlightOutgoingEdges",value:function(t,e){return this.doTemporalHighlightEdges(this.select(this.graph.getOutgoingEdges(t)),this.getEdgeStyleOptions(e))}},{key:"highlightIncomingEdges",value:function(t,e){return this.doTemporalHighlightEdges(this.select(this.graph.getIncomingEdges(t)),this.getEdgeStyleOptions(e))}},{key:"traverseOutgoingEdges",value:function(t,e){return this.traverseEdges(this.select(this.graph.getOutgoingEdges(t)),this.getEdgeStyleOptions(e))}},{key:"traverseIncomingEdges",value:function(t,e){return this.traverseEdges(this.select(this.graph.getIncomingEdges(t)),this.getEdgeStyleOptions(e))}},{key:"traverseIncidentEdges",value:function(t,e){return this.traverseEdges(this.select(this.graph.getIncidentEdges(t)),this.getEdgeStyleOptions(e))}},{key:"traverseEdgesBetween",value:function(t,e){return this.traverseEdges(this.select(this.graph.getEdgesBetween(t)),this.getEdgeStyleOptions(e),t.source)}},{key:"traverseAllEdgesBetween",value:function(t,e){return this.traverseEdges(this.select(this.graph.getAllEdgesBetween(t)),this.getEdgeStyleOptions(e),t.source)}}],n&&br(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ar(t){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar(t)}function Sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mr(r.key),r)}}function Mr(t){var e=function(t,e){if("object"!=Ar(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Ar(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ar(e)?e:String(e)}var Pr=function(){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i,o=this;this.events=wt("layoutStart","layoutEnd"),this.markerId="marker-"+n,this.options=this.defaultOptions(r),this.createGraph(),this.selector=new Er({owner:this,graph:this.graph}),this.nodeDrawer=(i=this,function(t){var e=i.layout,n=t.selectAll("g.node").data((function(t){return t.nodes}),(function(t){return t.id})),r=n.enter().append("g").attr("class",(function(t){return"node "+(t.class||"")})).attr("id",(function(t){return xn(t.id)})).attr("transform",(function(t){return bn({translate:t})})).on("mouseover",(function(){var t=gn(this);t.over||t.style("cursor","pointer"),t.over=!0})).on("mouseout",(function(){var t=gn(this);t.over=!1,t.style("cursor",null)})).attr("opacity",0);r.transition("enter").attr("opacity",1),r.call(e.drag),r.append("circle").attr("fill",(function(t){return t.fill})).attr("r",(function(t){return t.r})),r.append("text").classed("label",!0).attr("fill","white").attr("font-size","12px").attr("text-anchor","middle").attr("dominant-baseline","central"),n.merge(r).selectAll("text.label").text((function(t){return"label"in t?t.label:t.id})),r.append("text").classed("outer-top-right",!0).attr("fill",On.BLUE).attr("font-size","9px").attr("text-anchor","start").attr("x",(function(t){return t.width/2-2})).attr("y",(function(t){return-t.height/2+3})),n.selectAll("text.outer-top-right").text((function(t){if("topRightLabel"in t)return t.topRightLabel})),r.append("text").classed("outer-top-left",!0).attr("fill",On.BLUE).attr("font-size","9px").attr("text-anchor","end").attr("x",(function(t){return-t.width/2-2})).attr("y",(function(t){return-t.height/2+3})),n.selectAll("text.outer-top-left").text((function(t){if("topLeftLabel"in t)return t.topLeftLabel})),n.attr("transform",(function(t){return bn({translate:t})})),n.exit().remove()}),this.edgeDrawer=vr({owner:this}),this.layout=(0,$n.d3adaptor)({version:"4",dispatch:wt,timer:It,drag:Kn,get event(){return t.event}}),this.layout.on("start",(function(){o.events.call("layoutStart")})),this.layout.on("tick",(function(){o.tick()})),this.layout.on("end",(function(){o.events.call("layoutEnd")}))}var n,r;return n=e,(r=[{key:"createGraph",value:function(){var t=this,e=this.options.data,n=e.nodes,r=e.edges;e.nodes=[],e.edges=[],this.graph=new Dn(this,e),n.forEach((function(e){return t.graph.addNode(e)})),r.forEach((function(e){return t.graph.addEdge(e)}))}},{key:"defaultOptions",value:function(t){var e=gn(t.target).node().getBoundingClientRect();return(t=yn()({width:e.width,height:Math.max(e.height,400),animationTime:1e3,labels:!0,directed:!1},t)).data=yn()({nodes:[],edges:[],groups:[],constraints:[],avoidOverlaps:!0,size:[t.width,t.height],linkDistance:function(t){return t.linkDistance||80}},t.data),t}},{key:"initLayout",value:function(t){var e=this;if(!t.skipLayout){var n={nodes:!0,links:!0,groups:!0,constraints:!0,distanceMatrix:!0,size:!0},r={edges:"links"};Object.keys(e.options.data).forEach((function(t){var i=e.options.data[t];r.hasOwnProperty(t)&&(t=r[t]),n[t]?e.layout[t](Gn(i)):e.layout[t].apply(e.layout,Gn(i))})),this.layout.start.apply(this.layout,t.layoutStartOptions)}}},{key:"tick",value:function(){this.edgeGroup.call(this.edgeDrawer),this.nodeGroup.call(this.nodeDrawer)}},{key:"update",value:function(t){return t=yn()(!0,{skipLayout:!1,layoutStartOptions:[]},t),this.initLayout(t),this.build(),t.skipLayout&&this.tick(),this}},{key:"build",value:function(){var t=gn(this.options.target).selectAll("svg.greuler").data([this.options]),e=t.enter().append("svg").attr("class","greuler").attr("width",(function(t){return t.width})).attr("height",(function(t){return t.height}));e.append("svg:defs").append("svg:marker").attr("id",this.markerId).attr("viewBox","0 -5 10 10").attr("refX",9).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").append("svg:path").attr("d","M0,-4L10,0L0,4L2,0").attr("stroke-width","0px").attr("fill-opacity",1).attr("fill","#777");var n=this.root=e.merge(t),r=n.selectAll("g.edges").data((function(t){return[t.data]}));this.edgeGroup=r.enter().append("g").attr("class","edges").merge(r);var i=n.selectAll("g.nodes").data((function(t){return[t.data]}));this.nodeGroup=i.enter().append("g").attr("class","nodes").merge(i)}}])&&Sr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}(),Or=[];function Nr(t){var e=gn(t.target),n=e.attr("greuler-id");return n||(n=wn(),e.attr("greuler-id",n),Or[n]=new Pr(n,t)),Or[n]}Nr.Graph=Dn,Nr.colors=On;const Lr=Nr})(),r.default})()));
//# sourceMappingURL=greuler.js.map